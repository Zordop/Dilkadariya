<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Timber Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #303030;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
      .highlight .err {
        background-color: transparent;
      }
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,200i,300,300i,400,400i,600,600i,700,700i" rel="stylesheet">

  </head>

  <body class="index" data-languages="[]">
    <div class="topnav">
    <a href="/"><div id="logo">
      <img src="images/timberlogo.png" alt="Timber" style="width:32px;height:32px;border:0">
      <h1 class="toc-ignore">Timber</h1>
    </div></a>
    <nav id="nav">
      <ul class="navigation" role="navigation">
            <li><a href="http://upstatement.com/timber/" alt="Timber Homepage" target="_blank">Timber Homepage</a></li>
            <li><a href="http://twig.sensiolabs.org/doc/templates.html" alt="Twig Documentation" target="_blank">Twig Documentation</a></li>
            <li><a href="http://code.tutsplus.com/series/kick-start-wordpress-development-with-twig--cms-974" alt="Getting Started Tutorials" target="_blank">Getting Started Tutorials</a></li>
            <li><a href="https://github.com/timber/timber">
                  <img src="images/Github.png" alt="Star on Github" style="width:29px;height:29px;border:0" target="_blank">
                </a></li>
      </ul>
    </nav><!--end navigation-->
    </div><!--end topnav-->
    <a href="#" id="nav-button">
      <span id="docs-contents">
        <p>Docs Contents</p>
        <!--<img src="images/navbar.png" />-->
      </span>
    </a>
    <div class="tocify-wrapper">
        <div class="lang-selector">
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
     <!-- removed to bring code snippets inline -->
     <!--  <div class="dark-box"></div> -->
      <div class="content">
        
          <h1 id="getting-started">Getting Started</h1>

          <h1 id="getting-started-setup">Getting Started: Setup</h1>

<h2 id="installation">Installation</h2>

<h4 id="via-wordpress-org-easy">Via WordPress.org (easy)</h4>

<p>You can just grab the all-things-included plugin at <a href="http://wordpress.org/plugins/timber-library/">WordPress.org</a> either through the WP site or your Plugins-&gt;Add New in wp-admin. Then skip ahead to <a href="#use-the-starter-theme">using the starter theme</a>.</p>

<h4 id="via-github-for-developers">Via GitHub (for developers)</h4>

<p>The GitHub version of Timber requires <a href="https://getcomposer.org/download/">Composer</a>. If you&rsquo;d prefer one-click installation, you should use the <a href="https://wordpress.org/plugins/timber-library/">WordPress.org</a> version.</p>
<pre class="highlight shell"><code>composer require timber/timber
</code></pre>

<p>If your theme is not setup to pull in Composer&rsquo;s autoload file, you will need to:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">require_once</span><span class="p">(</span><span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/vendor/autoload.php'</span><span class="p">);</span>
</code></pre>

<p>at the top of your <code class="prettyprint">functions.php</code> file.</p>

<p>Initialize Timber with:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$timber</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Timber\Timber</span><span class="p">();</span>
</code></pre>

<hr>

<h2 id="use-the-starter-theme"><a href="https://github.com/Upstatement/timber-starter-theme">Use the starter theme</a></h2>

<p>This is for starting a project from scratch. You can also use Timber in an existing theme.</p>

<h5 id="navigate-to-your-wordpress-themes-directory">Navigate to your WordPress themes directory</h5>

<p>Like where twentyeleven and twentytwelve live. The Timber Starter will live at the same level.</p>

<p>/wp-content/themes  /twentyeleven
                        /twentytwelve
                        /timber-starter-theme</p>

<p>You should now have:</p>

<p>/wp-content/themes/timber-starter-theme</p>

<p>You should probably <strong>rename</strong> this to something better.</p>

<h3 id="1-activate-timber">1. Activate Timber</h3>

<p>It will be in wp-admin/plugins.php</p>

<h3 id="2-select-your-theme-in-wordpress">2. Select your theme in WordPress</h3>

<p>Make sure you select the Timber-enabled theme <strong>after</strong> you activate the plugin. The theme will crash unless Timber is activated. Use the <strong>timber-starter-theme</strong> theme from the step above (or whatever you renamed it).</p>

<h3 id="3-let-39-s-write-our-theme">3. Let&rsquo;s write our theme!</h3>

          <h1 id="getting-started-themeing">Getting Started: Themeing</h1>

<h2 id="your-first-timber-project">Your first Timber project</h2>

<h3 id="let-39-s-start-with-your-single-post">Let&rsquo;s start with your single post</h3>

<p>Find this file:</p>
<pre class="highlight html"><code>    wp-content/themes/{timber-starter-theme}/views/single.twig
</code></pre>

<p>Brilliant! Open it up.</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"base.twig"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content-wrapper"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"post-type-</span><span class="cp">{{</span> <span class="nv">post.post_type</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">id=</span><span class="s">"post-</span><span class="cp">{{</span> <span class="nv">post.ID</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"article-content"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"article-h1"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
                <span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"article-h2"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.subtitle</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"blog-author"</span><span class="nt">&gt;&lt;span&gt;</span>By<span class="nt">&lt;/span&gt;</span> <span class="cp">{{</span> <span class="nv">post.author.name</span> <span class="cp">}}</span> <span class="nt">&lt;span&gt;</span><span class="ni">&amp;bull;</span><span class="nt">&lt;/span&gt;</span> <span class="cp">{{</span> <span class="nv">post.post_date</span><span class="o">|</span><span class="nf">date</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
                <span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span>
            <span class="nt">&lt;/section&gt;</span>
        <span class="nt">&lt;/article&gt;</span>
    <span class="nt">&lt;/div&gt;</span> <span class="c">&lt;!-- /content-wrapper --&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</code></pre>

<h4 id="this-is-the-fun-part">This is the fun part.</h4>
<pre class="highlight twig"><code><span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"article-h1"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>This is now how we now call stuff from the WordPress API. Instead of this familiar face:</p>
<pre class="highlight html"><code><span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"article-h1"</span><span class="nt">&gt;</span><span class="cp">&lt;?php the_title(); ?&gt;</span><span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>This is how WordPress wants you to interact with its API. Which sucks. Because soon you get things like:</p>
<pre class="highlight html"><code><span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"article-h1"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"&lt;?php get_permalink(); ?&gt;"</span><span class="nt">&gt;</span><span class="cp">&lt;?php the_title(); ?&gt;</span><span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
</code></pre>

<p>Okay, not <em>too</em> terrible, but doesn&rsquo;t this (Timber) way look so much nicer:</p>
<pre class="highlight twig"><code><span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"article-h1"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.link</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/h1&gt;</span>
</code></pre>

<p>It gets better. Let&rsquo;s explain some other concepts.</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"base.twig"</span> <span class="cp">%}</span>
</code></pre>

<p>This means that <code class="prettyprint">single.twig</code> is using <code class="prettyprint">base.twig</code> as its parent template. That&rsquo;s why you don&rsquo;t see any <code class="prettyprint">&lt;head&gt;</code>, <code class="prettyprint">&lt;header&gt;</code>, or <code class="prettyprint">&lt;footer&gt;</code> tags, those site-wide (usually) things are all controlled in <code class="prettyprint">base.twig</code>. You can create any number of base files to extend from (the &ldquo;base&rdquo; naming convention is recommended, but not requrired).</p>

<p>What if you want modify <code class="prettyprint">&lt;head&gt;</code>, etc? Read on to learn all about blocks.</p>

<h3 id="blocks">Blocks</h3>

<p>Blocks are the single most important and powerful concept in managing your templates. The <a href="http://twig.sensiolabs.org/doc/templates.html#template-inheritance">official Twig Documentation</a> has more details. Let&rsquo;s cover the basics.</p>

<p>In <code class="prettyprint">single.twig</code> you see opening and closing block declarations that surround the main page contents.</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span> <span class="c">{# other stuff here ... #}</span> <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</code></pre>

<p>If you were to peek into <strong>base.twig</strong> you would see a matching set of <code class="prettyprint">{% block content %} / {% endblock %}</code> tags. <strong>single.twig</strong> is replacing the content of base&rsquo;s <code class="prettyprint">{% block content %}</code> with its own.</p>

<h5 id="nesting-blocks-multiple-inheritance">Nesting Blocks, Multiple Inheritance</h5>

<p>This is when things get really cool. Whereas most people use PHP includes in a linear fashion, you can create infinite levels of nested blocks to particularly control your page templates. For example, let&rsquo;s say you occasionally want to replace the title/headline on your <code class="prettyprint">single.twig</code> template with a custom image or typography.</p>

<p>For this demo let&rsquo;s assume that the name of the page is &ldquo;All about Jared&rdquo; (making its slug <code class="prettyprint">all-about-jared</code>). First, I&rsquo;m going to surround the part of the template I want to control with block declarations:</p>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"base.twig"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content-wrapper"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"post-type-</span><span class="cp">{{</span> <span class="nv">post.post_type</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">id=</span><span class="s">"post-</span><span class="cp">{{</span> <span class="nv">post.ID</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"article-content"</span><span class="nt">&gt;</span>
                <span class="cp">{%</span> <span class="k">block</span> <span class="nv">headline</span> <span class="cp">%}</span>
                    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"article-h1"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
                    <span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">"article-h2"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.subtitle</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
                <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
                <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"blog-author"</span><span class="nt">&gt;&lt;span&gt;</span>By<span class="nt">&lt;/span&gt;</span> <span class="cp">{{</span> <span class="nv">post.author.name</span> <span class="cp">}}</span> <span class="nt">&lt;span&gt;</span><span class="ni">&amp;bull;</span><span class="nt">&lt;/span&gt;</span> <span class="cp">{{</span> <span class="nv">post.post_date</span><span class="o">|</span><span class="nf">date</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
                <span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span>
            <span class="nt">&lt;/section&gt;</span>
        <span class="nt">&lt;/article&gt;</span>
    <span class="nt">&lt;/div&gt;</span> <span class="c">&lt;!-- /content-wrapper --&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</code></pre>

<p>Compared to the earlier example of this page, we now have the <code class="prettyprint">{% block headline %}</code> bit surrounding the <code class="prettyprint">&lt;h1&gt;</code> and <code class="prettyprint">&lt;h2&gt;</code>.</p>

<p>To inject my custom bit of markup, I&rsquo;m going to create a file called <code class="prettyprint">single-all-about-jared.twig</code> in the <code class="prettyprint">views</code> directory. The logic for which template should be selected is controlled in <code class="prettyprint">single.php</code> but generally follows WordPress conventions on Template Hierarchy. Inside that file, all I need is:</p>
<pre class="highlight twig"><code><span class="c">{# single-all-about-jared.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"single.twig"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">headline</span> <span class="cp">%}</span>
    <span class="nt">&lt;h1&gt;&lt;img</span> <span class="na">src=</span><span class="s">"wp-content/uploads/2014/05/jareds-face.jpg"</span> <span class="na">alt=</span><span class="s">"Jared's Mug"</span><span class="nt">/&gt;&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</code></pre>

<p>So two big concepts going on here:</p>

<ol>
<li><strong>Multiple Inheritance</strong> I&rsquo;m extending <code class="prettyprint">{% single.twig %}</code>, which itself extends <code class="prettyprint">{% base.twig %}</code>. Thus we stay true to DRY and don&rsquo;t have very similar code between my two templates hanging around.</li>
<li><strong>Nested Blocks</strong> <code class="prettyprint">{% block headline %}</code> is located inside <code class="prettyprint">{% block content %}</code>. So while I&rsquo;m replacing the headline, I get to keep all the other markup and variables found in the parent template.</li>
</ol>

<p>What if you want to <strong>add</strong> to the block as opposed to replace? No prob, just call <code class="prettyprint">{{ parent() }}</code> where the parent&rsquo;s content should go.</p>

<h3 id="loop-index-page">Loop / Index page</h3>

<p>Let&rsquo;s crack open <strong>index.php</strong> and see what&rsquo;s inside:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<p>This is where we are going to handle the logic that powers our index file. Let&rsquo;s go step-by-step.</p>

<h4 id="get-the-starter">Get the starter</h4>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
</code></pre>

<p>This is going to return an object with a lot of the common things we need across the site. Things like your nav, wp_head and wp_footer you&rsquo;ll want to start with each time (even if you over-write them later). You can do a <code class="prettyprint">print_r($context);</code> to see what&rsquo;s inside or open-up <strong>timber.php</strong> to inspect for yourself</p>

<h4 id="grab-your-posts">Grab your posts</h4>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
</code></pre>

<p>We&rsquo;re now going to grab the posts that are inside the loop and stick them inside our data object under the <strong>posts</strong> key.</p>

<h5 id="timber-get_posts-usage">Timber::get_posts() usage</h5>

<h6 id="use-a-wp_query-array">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> array</h6>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
        <span class="s1">'tax_query'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'relation'</span> <span class="o">=&gt;</span> <span class="s1">'AND'</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s1">'taxonomy'</span> <span class="o">=&gt;</span> <span class="s1">'movie_genre'</span><span class="p">,</span>
                <span class="s1">'field'</span> <span class="o">=&gt;</span> <span class="s1">'slug'</span><span class="p">,</span>
                <span class="s1">'terms'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'action'</span><span class="p">,</span> <span class="s1">'comedy'</span> <span class="p">)</span>
            <span class="p">),</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s1">'taxonomy'</span> <span class="o">=&gt;</span> <span class="s1">'actor'</span><span class="p">,</span>
                <span class="s1">'field'</span> <span class="o">=&gt;</span> <span class="s1">'id'</span><span class="p">,</span>
                <span class="s1">'terms'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="mi">103</span><span class="p">,</span> <span class="mi">115</span><span class="p">,</span> <span class="mi">206</span> <span class="p">),</span>
                <span class="s1">'operator'</span> <span class="o">=&gt;</span> <span class="s1">'NOT IN'</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">);</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span>
</code></pre>

<h5 id="use-a-wp_query-string">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> string</h5>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$args</span> <span class="o">=</span> <span class="s1">'post_type=movies&amp;numberposts=8&amp;orderby=rand'</span><span class="p">;</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span>
</code></pre>

<h5 id="use-post-id-numbers">Use Post ID numbers</h5>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$ids</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="mi">123</span><span class="p">,</span> <span class="mi">234</span><span class="p">,</span> <span class="mi">421</span><span class="p">,</span> <span class="mi">811</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="nv">$ids</span><span class="p">);</span>
</code></pre>

<h4 id="render">Render</h4>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<p>We&rsquo;re now telling Twig to find <strong>index.twig</strong> and send it our data object.</p>

<p>Timber will look first in the child theme and then falls back to the parent theme (same as WordPress logic). The official load order is:</p>

<ol>
<li>User-defined locations</li>
<li>Directory of calling PHP script (but not theme)</li>
<li>Child theme</li>
<li>Parent theme</li>
<li>Directory of calling PHP script (including the theme)</li>
</ol>

<p>Item 2 is inserted above others so that if you&rsquo;re using Timber in a plugin it will use the twig files in the plugin&rsquo;s directory.</p>

          <h1 id="video-tutorials">Video Tutorials</h1>

<p>I&rsquo;m in the midst of an install and walk-through on Timber, here are the screencasts thus far:</p>

<h3 id="1-install-timber">1. Install Timber</h3>

<h4 id="option-1-via-github-for-developers">Option 1: Via GitHub (for developers)</h4>

<h5 id="1-navigate-to-your-wordpress-plugins-directory">1) Navigate to your WordPress plugins directory</h5>

<p>$ cd ~/Sites/mywordpress/wp-content/plugins</p>

<h5 id="2-use-git-to-grab-the-repo">2) Use git to grab the repo</h5>

<p>$ git clone git@github.com:jarednova/timber.git</p>

<h5 id="3-use-composer-to-download-the-dependencies-twig-etc">3) Use <a href="https://getcomposer.org/doc/00-intro.md">Composer</a> to download the dependencies (Twig, etc.)</h5>

<p>$ cd timber
    $ composer install</p>

<h4 id="option-2-via-composer-for-developers">Option 2: Via Composer (for developers)</h4>

<h5 id="1-navigate-to-your-wordpress-plugins-directory">1) Navigate to your WordPress plugins directory</h5>

<p>$ cd ~/Sites/mywordpress/wp-content/plugins</p>

<h5 id="2-use-composer-to-create-project-and-download-the-dependencies-twig-etc">2) Use <a href="https://getcomposer.org/doc/00-intro.md">Composer</a> to create project and download the dependencies (Twig, etc.)</h5>

<p>$ composer create-project &ndash;no-dev jarednova/timber ./timber</p>

<h4 id="option-3-via-wordpress-plugins-directory-for-non-developers">Option 3: Via WordPress plugins directory (for non-developers)</h4>

<h5 id="if-you-39-d-prefer-one-click-installation-you-should-use-the-wordpress-org-version">If you&rsquo;d prefer one-click installation, you should use the <a href="http://wordpress.org/plugins/timber-library/">WordPress.org</a> version.</h5>

<hr>

<p>Now just activate in your WordPress admin screen. Inside of the timber directory there&rsquo;s a timber-starter-theme. To use this move it into your <code class="prettyprint">themes</code> directory (probably want to rename it too) and select it.</p>

<hr>

<h3 id="2-including-a-twig-template-and-sending-data">2. Including a Twig template and sending data</h3>

<p><a href="http://www.youtube.com/watch?v=SlMonnwVi5M"><img alt="Installing Timber" src="http://img.youtube.com/vi/SlMonnwVi5M/0.jpg" /></a></p>

<p>In which we use an existing WordPress template and implement a very simple Timber usage.</p>

<p>Here&rsquo;s the relevant code:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* index.php */</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'headline'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Welcome to my new Timber Blog!'</span><span class="p">;</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'welcome.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>
<pre class="highlight twig"><code><span class="c">{# welcome.twig #}</span>
<span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"welcome-block"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inner"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h3&gt;</span><span class="cp">{{</span><span class="nv">headline</span><span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;p&gt;</span>This will be a superb blog, I will inform you every day<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre>

<hr>

<h3 id="3-connecting-twig-to-your-wordpress-admin">3. Connecting Twig to your WordPress Admin</h3>

<p><a href="http://www.youtube.com/watch?v=C7HtYkaG2DQ"><img alt="Connecting Timber" src="http://img.youtube.com/vi/C7HtYkaG2DQ/0.jpg" /></a></p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'welcome'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_post</span><span class="p">(</span><span class="mi">56</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'welcome.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>
<pre class="highlight twig"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"welcome-block"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inner"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h3&gt;</span><span class="cp">{{</span><span class="nv">welcome.post_title</span><span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">welcome.get_content</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;p&gt;</span>Follow me on <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/</span><span class="cp">{{</span><span class="nv">welcome.twitter_handle</span><span class="cp">}}</span><span class="s">"</span> <span class="na">target=</span><span class="s">"_blank"</span><span class="nt">&gt;</span>Twitter!<span class="nt">&lt;/a&gt;&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre>

<hr>

<h3 id="4-converting-html-to-twig-templates">4. Converting HTML to Twig Templates</h3>

<p><a href="http://www.youtube.com/watch?v=BxazrNBLK-0"><img alt="Connecting HTML Templates" src="http://img.youtube.com/vi/BxazrNBLK-0/0.jpg" /></a></p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'home-main.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>
<pre class="highlight twig"><code><span class="c">{# home-main.twig #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="ow">in</span> <span class="nv">posts</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">include</span> <span class="s2">"tz-post.twig"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<hr>

<h3 id="5-using-custom-post-types-with-timber-twig">5. Using Custom Post Types with Timber + Twig</h3>

<p><a href="http://www.youtube.com/watch?v=19T0MStDLSQ"><img alt="Using Custom Post Types with Timber" src="http://img.youtube.com/vi/19T0MStDLSQ/0.jpg" /></a></p>
<pre class="highlight twig"><code><span class="c">{# home-main.twig #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="ow">in</span> <span class="nv">posts</span> <span class="cp">%}</span>
    <span class="c">{# you can send includes an array, in order of precedence #}</span>
    <span class="cp">{%</span> <span class="k">include</span> <span class="p">[</span><span class="s2">"tz-"</span><span class="err">~</span><span class="nv">post.post_type</span><span class="err">~</span><span class="s2">".twig"</span><span class="p">,</span> <span class="s2">"tz-post.twig"</span><span class="p">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>
<pre class="highlight twig"><code><span class="c">{# tz-recipe.twig #}</span>
<span class="nt">&lt;article</span> <span class="na">id=</span><span class="s">"post-</span><span class="cp">{{</span><span class="nv">post.ID</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"post-</span><span class="cp">{{</span><span class="nv">post.ID</span><span class="cp">}}</span><span class="s"> </span><span class="cp">{{</span><span class="nv">post.post_type</span><span class="cp">}}</span><span class="s"> type-</span><span class="cp">{{</span><span class="nv">post.post_type</span><span class="cp">}}</span><span class="s"> status-publish hentry"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">post.get_thumbnail</span> <span class="cp">%}</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.get_thumbnail.get_src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">600</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span><span class="nv">post.post_title</span><span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"post-body"</span><span class="nt">&gt;</span>
        <span class="cp">{{</span><span class="nv">post.get_content</span><span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/article&gt;</span>
</code></pre>

<hr>

<h3 id="6-extending-templates">6. Extending Templates</h3>

<p><em>Todo: Record Screencast showing this</em></p>

<p>This is a <strong>really</strong> important concept for DRY. I&rsquo;ll show how to create a base template that can power your site:</p>

<h5 id="create-a-base-twig-file">Create a <code class="prettyprint">base.twig</code> file:</h5>
<pre class="highlight twig"><code><span class="c">{# base.twig #}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s2">"html-header.twig"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- This is where you'll put template-specific stuff that needs to go in the head tags like custom meta tags, etc. --&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">body_class</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- The template's main content will go here. --&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">include</span> <span class="s2">"footer.twig"</span> <span class="cp">%}</span>
<span class="cp">{{</span><span class="nv">wp_footer</span><span class="cp">}}</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

<h5 id="you-can-use-this-in-a-custom-single-twig-file">You can use this in a custom <code class="prettyprint">single.twig</code> file:</h5>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"base.twig"</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
    <span class="nt">&lt;meta</span> <span class="na">property=</span><span class="s">"og:title"</span> <span class="na">value=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">post.get_content</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</code></pre>

          <h1 id="tools-for-working-with-twig">Tools for Working with Twig</h1>

<h2 id="text-editor-add-ons">Text editor add-ons</h2>

<ul>
<li>Text Mate &amp; Sublime text bundle - <a href="https://github.com/Anomareh/PHP-Twig.tmbundle">Anomareh&rsquo;s PHP-Twig</a></li>
<li>Emacs - <a href="http://web-mode.org/">Web Mode</a></li>
<li>Geany - add <a href="https://wiki.geany.org/howtos/geany_and_django#twigsymfony2_support">Twig/Symfony2 detection and highlighting</a></li>
<li>PHPStorm - Built in coloring and code hinting. The twig extension is recognized and has been for some time. <a href="http://blog.jetbrains.com/phpstorm/2013/06/twig-support-in-phpstorm/">Twig Details for PHPStorm</a></li>
<li>Atom - Syntax Highlighting for Atom <a href="https://atom.io/packages/php-twig">Atom Component</a></li>
</ul>

<h2 id="other">Other</h2>

<ul>
<li><a href="http://goosecode.com/watson/">Watson-Ruby</a> (inline issue manager - put tags like [todo] in a Twig comment and find it easily later!). Watson supports Twig as of version 1.6.3.</li>
</ul>

<h2 id="javascript">JavaScript</h2>

<ul>
<li><a href="https://github.com/justjohn/twig.js">Twig.js</a> use those <code class="prettyprint">.twig</code> files in the Javascript and AJAX components of your site.</li>
<li><a href="http://mozilla.github.io/nunjucks/">Nunjucks</a> another JS template language that is also based on <a href="http://jinja.pocoo.org/docs/">Jinja2</a></li>
</ul>

          <h1 id="guides">Guides</h1>

          <h1 id="1-0-upgrade-guide">1.0 Upgrade Guide</h1>

<p>A significant part of this 1.0 release is removing lots of deprecated functions and methods that go back to the earliest designs for Timber in early 2013.</p>

<h2 id="should-i-upgrade">Should I upgrade?</h2>

<p>Maybe. Read on:</p>

<h4 id="i-have-a-legacy-site">I have a legacy site</h4>

<p>If you wrote a theme in 2014, it&rsquo;s running fine and the development of the site has concluded: stop right there! Do not upgrade! While there are some slight performance benefits (and not having the warning light on the plugin dashboard) it&rsquo;s not worth it to you. Close this window and forget you ever heard about Timber 1.0</p>

<h4 id="i-have-a-site-under-continued-development">I have a site under continued development</h4>

<p>Maybe. There are going to be tradeoffs with whatever route you pick. I recommend testing your site thoroughly with a staging or local copy to find all the issues before applying Timber 1.0 to production. However, you&rsquo;re the best judge of how much potential refactoring you&rsquo;re looking at and whether it&rsquo;s worth the benefits.</p>

<h4 id="i-am-starting-a-new-site">I am starting a new site.</h4>

<p>Definitely. You&rsquo;ll get the benefits of being on the newest platform. We have some cool stuff ahead that you&rsquo;ll want to include in your development workflow, and of course you&rsquo;ll learn about the newest/best ways to make Timber themes.</p>

<h2 id="routes">Routes</h2>

<p>The Routes feature has now been totally deprecated. If you have custom routes you&rsquo;ll need to add the <a href="https://github.com/upstatement/routes">Upstatement/routes</a> repo to your theme? How to do this?</p>

<h5 id="1-add-to-composer-optional-but-recommended">1. Add to Composer (optional, but recommended)</h5>

<p>Simply add <code class="prettyprint">Upstatement/routes</code> to your <code class="prettyprint">composer.json</code> file like so:</p>
<pre class="highlight json"><code><span class="s2">"require"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"timber/timber"</span><span class="p">:</span><span class="s2">"1.*"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"advanced-custom-fields/advanced-custom-fields-pro"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"Upstatement/routes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span></code></pre>

<p>Here&rsquo;s a full <a href="https://gist.github.com/jarednova/dc84cf14735a870dbe3d2763e94095a1">Gist</a> of what this looks like. Run a <code class="prettyprint">composer install</code> to update your theme&rsquo;s dependencies.</p>

<p><em>Note: because we&rsquo;re not monsters, the [Upstatement/routes] repo will continue to be included with Timber for the next several versions</em></p>

<h5 id="2-add-to-your-theme">2. Add to your theme:</h5>

<p>If you haven&rsquo;t already, you&rsquo;ll need to load Composer&rsquo;s autoload file into your theme via:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>
</code></pre>

<h5 id="3-update-your-routes">3. Update your Routes:</h5>

<p>Now just update the PHP for your old routes to the new ones. It&rsquo;ll be basically the same code, but with cleaner syntax <strong>and a different arguments order for the <code class="prettyprint">::load</code> method</strong></p>

<h6 id="before">Before:</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">add_route</span><span class="p">(</span><span class="s1">'myfoo/bar'</span><span class="p">,</span> <span class="s1">'my_callback_function'</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">add_route</span><span class="p">(</span><span class="s1">'my-events/:event'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">(</span><span class="s1">'post_type=event'</span><span class="p">);</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">load_view</span><span class="p">(</span><span class="s1">'single.php'</span><span class="p">,</span> <span class="nv">$query</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$params</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h6 id="after">After:</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Routes</span><span class="o">::</span><span class="na">map</span><span class="p">(</span><span class="s1">'myfoo/bar'</span><span class="p">,</span> <span class="s1">'my_callback_function'</span><span class="p">);</span>
<span class="nx">Routes</span><span class="o">::</span><span class="na">map</span><span class="p">(</span><span class="s1">'my-events/:event'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$params</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$query</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WP_Query</span><span class="p">(</span><span class="s1">'post_type=event'</span><span class="p">);</span>
    <span class="cm">/* please note the different order of arguments vs. Timber::load_template */</span>
    <span class="nx">Routes</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">'single.php'</span><span class="p">,</span> <span class="nv">$params</span><span class="p">,</span> <span class="nv">$query</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<p>&hellip; and that&rsquo;s the hardest part, done!</p>

<h2 id="object-properties">Object Properties</h2>

<h4 id="post">Post</h4>

<ul>
<li>If you&rsquo;re using <code class="prettyprint">{{ post.permalink }}</code> or <code class="prettyprint">{{ post.get_permalink }}</code> you should replace with <code class="prettyprint">{{ post.link }}</code></li>
<li>If you&rsquo;re using <code class="prettyprint">{{ post.url }}</code> or <code class="prettyprint">{{ post.get_url }}</code> you should replace with <code class="prettyprint">{{ post.link }}</code></li>
<li>If you&rsquo;re using <code class="prettyprint">{{ post.thumbnail.url }}</code> or <code class="prettyprint">{{ post.get_thumbnail.url }}</code> you should replace with <code class="prettyprint">{{ post.thumbnail.src }}</code></li>
</ul>

<h2 id="static-methods">Static methods</h2>

<p>Way back in <code class="prettyprint">0.18</code>, a new helper library was added for URLs. In my infinite wisdom I called it <code class="prettyprint">TimberURLHelper</code>. Previously old static methods in <code class="prettyprint">TimberHelper</code> still worked (like <code class="prettyprint">TimberHelper::get_current_url</code>) â€” they don&rsquo;t any longer. The full list of methods you&rsquo;ll need to update is&hellip;</p>

<ul>
<li><code class="prettyprint">TimberHelper::get_current_url</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::get_current_url()</code></li>
<li><code class="prettyprint">TimberHelper::is_url</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::is_url()</code></li>
<li><code class="prettyprint">TimberHelper::get_path_base</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::get_path_base()</code></li>
<li><code class="prettyprint">TimberHelper::get_rel_url</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::get_rel_url()</code></li>
<li><code class="prettyprint">TimberHelper::is_local</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::is_local()</code></li>
<li><code class="prettyprint">TimberHelper::get_full_path</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::get_full_path()</code></li>
<li><code class="prettyprint">TimberHelper::get_rel_path</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::get_rel_path()</code></li>
<li><code class="prettyprint">TimberHelper::remove_double_slashes</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::remove_double_slashes()</code></li>
<li><code class="prettyprint">TimberHelper::prepend_to_url</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::prepend_to_url()</code></li>
<li><code class="prettyprint">TimberHelper::preslashit</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::preslashit()</code></li>
<li><code class="prettyprint">TimberHelper::is_external</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::is_external()</code></li>
<li><code class="prettyprint">TimberHelper::download_url</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::download_url()</code></li>
<li><code class="prettyprint">TimberHelper::get_params</code> &mdash; becomes &mdash;&gt; <code class="prettyprint">Timber\URLHelper::get_params()</code></li>
</ul>

<h2 id="deprecated">Deprecated</h2>

<p>Many of the aliases with <code class="prettyprint">get_*</code> are now deprecated. For awhile, we&rsquo;ve recommended using <code class="prettyprint">post.title</code> instead of <code class="prettyprint">post.get_title</code>, <code class="prettyprint">post.thumbnail</code> instead of <code class="prettyprint">post.get_thumbnail</code>, etc. In future versions this will be enforced.</p>

          <h1 id="acf-cookbook">ACF Cookbook</h1>

<p>Timber is designed to play nicely with (the amazing) <a href="http://www.advancedcustomfields.com/">Advanced Custom Fields</a>. It&rsquo;s not a requirement, of course.</p>

<p>While data saved by ACF is available via <code class="prettyprint">{{post.my_acf_field}}</code> you will often need to do some additional work to get back the <em>kind</em> of data you want. For example, images are stored as image ID#s which you might want to translate into a specific image object. Read on to learn more about those specific exceptions.</p>

<h3 id="wysiwyg-field-and-other-requiring-text">WYSIWYG field (and other requiring text):</h3>
<pre class="highlight twig"><code><span class="nt">&lt;h3&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"intro-text"</span><span class="nt">&gt;</span>
     <span class="cp">{{</span><span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'my_wysiwyg_field'</span><span class="p">)</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>This will apply your expected paragraph breaks and other pre-processing to the text.</p>

<h3 id="image-field-type">Image field type:</h3>

<p>You can retrieve an image from a custom field, then use it in a Twig template. The most reliable approach is this: When setting up your custom fields you&rsquo;ll want to save the <code class="prettyprint">image_id</code> to the field. The image object, url, etc. <em>will</em> work but it&rsquo;s not as fool-proof.</p>

<h5 id="the-quick-way-for-most-situations">The quick way (for most situations)</h5>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">TimberImage</span><span class="p">(</span><span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'hero_image'</span><span class="p">))</span><span class="err">.</span><span class="nv">src</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h5 id="the-long-way-for-some-special-situations">The long way (for some special situations)</h5>

<p>This is where we&rsquo;ll start in PHP.</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span><span class="p">)){</span>
    <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberImage</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span><span class="p">);</span>
<span class="p">}</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$post</span><span class="p">;</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</code></pre>

<p><code class="prettyprint">TimberImage</code> should be initialized using a WordPress image ID#. It can also take URLs and image objects, but that requires extra processing.</p>

<p>You can now use all the above functions to transform your custom images in the same way, the format will be:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.hero_image.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">500</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<hr>

<h3 id="gallery-field">Gallery Field:</h3>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">for</span> <span class="nv">image</span> <span class="ow">in</span> <span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'gallery'</span><span class="p">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">TimberImage</span><span class="p">(</span><span class="nv">image</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<hr>

<h3 id="repeater-field">Repeater field</h3>

<p>You can access repeater fields within in twig files:</p>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;h2&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"my-list"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'my_repeater'</span><span class="p">)</span> <span class="cp">%}</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"item"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h4&gt;</span><span class="cp">{{</span><span class="nv">item.name</span><span class="cp">}}</span><span class="nt">&lt;/h4&gt;</span>
            <span class="nt">&lt;h6&gt;</span><span class="cp">{{</span><span class="nv">item.info</span><span class="cp">}}</span><span class="nt">&lt;/h6&gt;</span>
            <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">TimberImage</span><span class="p">(</span><span class="nv">item.picture</span><span class="p">)</span><span class="err">.</span><span class="nv">src</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h5 id="nested">Nested?</h5>

<p>When you run <code class="prettyprint">get_field</code> on an outer ACF field, everything inside is ready to be traversed. You can refer to nested fields via item_outer.inner_repeater</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">for</span> <span class="nv">item_outer</span> <span class="ow">in</span> <span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'outer'</span><span class="p">)</span> <span class="cp">%}</span>
     <span class="cp">{{</span><span class="nv">item_outer.title</span><span class="cp">}}</span>

     <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item_inner</span> <span class="ow">in</span> <span class="nv">item_outer.inner_repeater</span> <span class="cp">%}</span>
          <span class="cp">{{</span><span class="nv">item_inner.title</span><span class="cp">}}</span>
     <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h5 id="troubleshooting">Troubleshooting</h5>

<p>A common problem in working with repeaters is that you should only call the <code class="prettyprint">get_field</code> method <strong>once</strong> on an item. In other words if you have a field inside a field (for example, a relationship inside a repeater or a repeater inside a repeater, <strong>do not</strong> call <code class="prettyprint">get_field</code> on the inner field). More:</p>

<h6 id="don-39-t-do-this-bad">DON&rsquo;T DO THIS: (Bad)</h6>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">for</span> <span class="nv">gear</span> <span class="ow">in</span> <span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'gear_items'</span><span class="p">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;h3&gt;</span> <span class="cp">{{</span> <span class="nv">gear.brand_name</span> <span class="cp">}}</span> <span class="nt">&lt;/h3&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">gear_feature</span> <span class="ow">in</span> <span class="nv">gear.get_field</span><span class="p">(</span><span class="s1">'features'</span><span class="p">)</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span> <span class="cp">{{</span><span class="nv">gear_feature</span><span class="cp">}}</span> <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h6 id="do-this-good">Do THIS: (Good)</h6>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">for</span> <span class="nv">gear</span> <span class="ow">in</span> <span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'gear_items'</span><span class="p">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;h3&gt;</span> <span class="cp">{{</span> <span class="nv">gear.brand_name</span> <span class="cp">}}</span> <span class="nt">&lt;/h3&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">gear_feature</span> <span class="ow">in</span> <span class="nv">gear.features</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span> <span class="cp">{{</span><span class="nv">gear_feature</span><span class="cp">}}</span> <span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<hr>

<h3 id="flexible-content-field">Flexible content field</h3>

<p>Similar to repeaters, get the field by the name of the flexible content field:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">for</span> <span class="nv">media_item</span> <span class="ow">in</span> <span class="nv">post.get_field</span><span class="p">(</span><span class="s1">'media_set'</span><span class="p">)</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">media_item.acf_fc_layout</span> <span class="o">==</span> <span class="s1">'image_set'</span> <span class="cp">%}</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">TimberImage</span><span class="p">(</span><span class="nv">media_item.image</span><span class="p">)</span><span class="err">.</span><span class="nv">src</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"caption"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">TimberImage</span><span class="p">(</span><span class="nv">media_item.image</span><span class="p">)</span><span class="err">.</span><span class="nv">caption</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"notes"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">media_item.notes</span><span class="cp">}}</span><span class="nt">&lt;/aside&gt;</span>
    <span class="cp">{%</span> <span class="nv">elseif</span> <span class="nv">media_item.acf_fc_layout</span> <span class="o">==</span> <span class="s1">'video_set'</span> <span class="cp">%}</span>
        <span class="nt">&lt;iframe</span> <span class="na">width=</span><span class="s">"560"</span> <span class="na">height=</span><span class="s">"315"</span> <span class="na">src=</span><span class="s">"http://www.youtube.com/embed/</span><span class="cp">{{</span><span class="nv">media_item.youtube_id</span><span class="cp">}}</span><span class="s">"</span> <span class="na">frameborder=</span><span class="s">"0"</span> <span class="na">allowfullscreen</span><span class="nt">&gt;&lt;/iframe&gt;</span>
        <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"caption"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">media_item.caption</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<hr>

<h3 id="options-page">Options Page</h3>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'site_copyright_info'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_field</span><span class="p">(</span><span class="s1">'copyright_info'</span><span class="p">,</span> <span class="s1">'options'</span><span class="p">);</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>
<pre class="highlight twig"><code>    <span class="nt">&lt;footer&gt;</span><span class="cp">{{</span><span class="nv">site_copyright_info</span><span class="cp">}}</span><span class="nt">&lt;/footer&gt;</span>
</code></pre>

<h6 id="get-all-info-from-your-options-page">Get all info from your options page</h6>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'options'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_fields</span><span class="p">(</span><span class="s1">'options'</span><span class="p">);</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<p>ACF Pro has a built in options page, and changes the <code class="prettyprint">get_fields(&#39;options&#39;)</code> to <code class="prettyprint">get_fields(&#39;option&#39;)</code>.</p>
<pre class="highlight twig"><code>    <span class="nt">&lt;footer&gt;</span><span class="cp">{{</span><span class="nv">options.copyright_info</span><span class="cp">}}</span><span class="nt">&lt;/footer&gt;</span>
</code></pre>

<h6 id="use-options-info-site-wide">Use options info site wide</h6>

<p>To use any options fields site wide, add the <code class="prettyprint">option</code> context to your functions.php file</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="nx">add_filter</span><span class="p">(</span> <span class="s1">'timber_context'</span><span class="p">,</span> <span class="s1">'mytheme_timber_context'</span>  <span class="p">);</span>

<span class="k">function</span> <span class="nf">mytheme_timber_context</span><span class="p">(</span> <span class="nv">$context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'options'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_fields</span><span class="p">(</span><span class="s1">'option'</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$context</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>Now, you can use any of the option fields across the site instead of per template.</p>
<pre class="highlight twig"><code>/* footer.twig */
<span class="nt">&lt;footer&gt;</span><span class="cp">{{</span><span class="nv">options.copyright_info</span><span class="cp">}}</span><span class="nt">&lt;/footer&gt;</span>
</code></pre>

<hr>

<h3 id="getting-acf-info">Getting ACF info:</h3>

<p>You can grab specific field label data like so:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$context</span><span class="p">[</span><span class="s2">"acf"</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_field_objects</span><span class="p">(</span><span class="nv">$data</span><span class="p">[</span><span class="s2">"post"</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ID</span><span class="p">);</span>
</code></pre>
<pre class="highlight twig"><code><span class="cp">{{</span> <span class="nv">acf.your_field_name_here.label</span> <span class="cp">}}</span>
</code></pre>

<hr>

<h3 id="query-by-custom-field-value">Query by custom field value:</h3>

<h6 id="use-a-wp_query-array">Use a <a href="http://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> array</h6>

<h4 id="basic-example">Basic Example</h4>

<p>This example shows the arguments to find all posts where a custom field called â€˜colorâ€™ has a value of â€˜redâ€™.</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'numberposts'</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
    <span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'post'</span><span class="p">,</span>
    <span class="s1">'meta_key'</span> <span class="o">=&gt;</span> <span class="s1">'color'</span><span class="p">,</span>
    <span class="s1">'meta_value'</span> <span class="o">=&gt;</span> <span class="s1">'red'</span>
<span class="p">);</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span>
</code></pre>

<hr>

          <h1 id="cheatsheet">Cheatsheet</h1>

<p>Here are some helpful conversions for functions you&rsquo;re probably well familiar with in WordPress and their Timber equivalents. These assume a PHP file with the <code class="prettyprint">Timber::get_context();</code> function at the top. For example:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h2 id="blog-info">Blog Info</h2>

<ul>
<li><code class="prettyprint">blog_info(&#39;charset&#39;)</code> =&gt; <code class="prettyprint">{{ site.charset }}</code></li>
<li><code class="prettyprint">blog_info(&#39;description&#39;)</code> =&gt; <code class="prettyprint">{{ site.description }}</code></li>
<li><code class="prettyprint">blog_info(&#39;sitename&#39;)</code> =&gt; <code class="prettyprint">{{ site.name }}</code></li>
<li><code class="prettyprint">blog_info(&#39;url&#39;)</code> =&gt; <code class="prettyprint">{{ site.url }}</code></li>
</ul>

<h2 id="body-class">Body Class</h2>

<ul>
<li><code class="prettyprint">implode(&#39; &#39;, get_body_class())</code> =&gt; <code class="prettyprint">&lt;body class=&quot;{{ body_class }}&quot;&gt;</code></li>
</ul>

<h2 id="post">Post</h2>

<ul>
<li><code class="prettyprint">the_content()</code> =&gt; <code class="prettyprint">{{ post.content }}</code></li>
<li><code class="prettyprint">the_permalink()</code> =&gt; <code class="prettyprint">{{ post.permalink }}</code></li>
<li><code class="prettyprint">the_title()</code> =&gt; <code class="prettyprint">{{ post.title }}</code></li>
<li><code class="prettyprint">get_the_tags()</code> =&gt; <code class="prettyprint">{{ post.tags }}</code></li>
</ul>

<h2 id="theme">Theme</h2>

<ul>
<li><code class="prettyprint">get_template_directory_uri()</code> =&gt; <code class="prettyprint">{{ theme.link }}</code> (Parent Themes)</li>
<li><code class="prettyprint">get_template_directory_uri()</code> =&gt; <code class="prettyprint">{{ theme.parent.link }}</code> (Child Themes)</li>
<li><code class="prettyprint">get_stylesheet_directory_uri()</code> =&gt; <code class="prettyprint">{{ theme.link }}</code></li>
<li><code class="prettyprint">get_template_directory()</code> =&gt; <code class="prettyprint">{{ theme.parent.path }}</code></li>
<li><code class="prettyprint">get_stylesheet_directory()</code> =&gt; <code class="prettyprint">{{ theme.path }}</code></li>
</ul>

<p>In WordPress parlance, stylesheet_directory = child theme, template directory = parent theme. Both WP and Timber functions safely return the current theme info if there&rsquo;s no parent/child going on.</p>

<h2 id="wp_functions">wp_functions</h2>

<ul>
<li><code class="prettyprint">wp_footer()</code> =&gt; <code class="prettyprint">{{ wp_footer }}</code></li>
<li><code class="prettyprint">wp_head()</code> =&gt; <code class="prettyprint">{{ wp_head }}</code></li>
</ul>

          <h1 id="image-cookbook">Image Cookbook</h1>

<p>Timber makes it damn easy to use an image in a tag. Automatically, Timber will interpret images attached to a post&rsquo;s thumbnail field (&ldquo;Featured Image&rdquo; in the admin) and treat them as <a href="TimberImage">TimberImages</a>. Then, in your Twig templates, you can access them via <code class="prettyprint">{{post.thumbnail}}</code>. If you want to see what&rsquo;s inside the TimberImage object you can run a&hellip;</p>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">post.thumbnail</span><span class="o">|</span><span class="nf">print_r</span><span class="cp">}}</span>
</code></pre>

<p>&hellip;inside one of your Twig templates.</p>

<h4 id="basic-image-stuff">Basic Image stuff</h4>

<p>Again, pretty damn easy:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"my-thumb-class"</span> <span class="na">alt=</span><span class="s">"Image for </span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h4 id="use-a-wp-image-size">Use a WP image size</h4>

<p>You can use WP&rsquo;s image sizes (including ones you register with your theme/plugin) by passing the name of the size to <code class="prettyprint">src</code> like so:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="p">(</span><span class="s1">'medium'</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"my-thumb-class"</span> <span class="na">alt=</span><span class="s">"Image for </span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>Note: If the WP size (e.g medium) has not been generated, it will return an empty string.</p>

<h4 id="arbitrary-resizing-of-images">Arbitrary Resizing of Images</h4>

<p>Want to resize an image? Easy! Here we&rsquo;re going to use <a href="http://twig.sensiolabs.org/doc/filters/index.html">Twig Filters</a>.</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">300</span><span class="p">,</span> <span class="nv">200</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>The first parameter is <code class="prettyprint">width</code> the second is <code class="prettyprint">height</code> (but it&rsquo;s optional) so if you don&rsquo;t know the height but just want to scale proportionally:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">640</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>All of these filters are written specifically to interact with WordPress&rsquo;s image API. (So don&rsquo;t worry, no weird TimThumb stuff going onâ€”this is all using WP&rsquo;s internal image sizing stuff).</p>

<h4 id="letterboxing-images">Letterboxing Images</h4>

<p>Let&rsquo;s say you have an image that you want to contain to a certain size without any cropping. If the proportions don&rsquo;t fit you&rsquo;ll letterbox the extra space. I find this is really useful when getting logos to all appear next to eachother. You can do this with:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">letterbox</span><span class="p">(</span><span class="nv">400</span><span class="p">,</span> <span class="nv">400</span><span class="p">,</span> <span class="s1">'#FFFFFF'</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>Here <code class="prettyprint">width</code> and <code class="prettyprint">height</code> are required. The third argument is the background color in hex format (default is #000000).</p>

<h4 id="converting-images">Converting images</h4>

<p>Let&rsquo;s say your client or editor can be a bit lazy (no!), resorting to PNGs where only JPGs are required. I&rsquo;ve seen this a lot. People will just upload screenshots that are saved by default as PNGs. No problemo!</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">tojpg</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>You can use this in conjunction with other filters.</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">tojpg</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">300</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>Filters are executed from left to right. You&rsquo;ll probably want to convert to JPG before running the resizing, etc.</p>

<h4 id="generating-retina-sizes">Generating Retina Sizes</h4>

<p>You can use Timber to generate @2x image sizes for retina devices. For example, using <code class="prettyprint">srcset</code>:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">srcset=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">1</span><span class="p">)</span> <span class="cp">}}</span><span class="s"> 1x,
    </span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">2</span><span class="p">)</span> <span class="cp">}}</span><span class="s">  2x,
    </span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">3</span><span class="p">)</span> <span class="cp">}}</span><span class="s">  3x,
    </span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">4</span><span class="p">)</span> <span class="cp">}}</span><span class="s">  4x"</span><span class="nt">&gt;</span>
</code></pre>

<p>This can be used in conjunction with other filters, so for example:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">400</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">srcset=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">400</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">1</span><span class="p">)</span> <span class="cp">}}</span><span class="s"> 1x,
    </span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">resize</span><span class="p">(</span><span class="nv">400</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">2</span><span class="p">)</span> <span class="cp">}}</span><span class="s">  2x,
    </span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">resize</span><span class="p">(</span><span class="nv">400</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">3</span><span class="p">)</span> <span class="cp">}}</span><span class="s">  3x,
    </span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span> <span class="err">|</span> <span class="nv">resize</span><span class="p">(</span><span class="nv">400</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span> <span class="err">|</span> <span class="nv">retina</span><span class="p">(</span><span class="nv">4</span><span class="p">)</span> <span class="cp">}}</span><span class="s">  4x"</span><span class="nt">&gt;</span>
</code></pre>

<hr>

<h4 id="using-images-in-custom-fields">Using images in custom fields:</h4>

<p>Let&rsquo;s say you&rsquo;re using a custom field plugin (like the amazing <a href="http://www.advancedcustomfields.com/">Advanced Custom Fields</a>). You can use the resulting images in your Twig templates very easily.</p>

<p>When setting up your custom fields you&rsquo;ll want to save the <code class="prettyprint">image_id</code> to the field. The image object, url, etc. <em>will</em> work but it&rsquo;s not as fool-proof.</p>

<h5 id="the-quick-way-for-most-situations">The quick way (for most situations)</h5>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">TimberImage</span><span class="p">(</span><span class="nv">post.hero_image</span><span class="p">)</span><span class="err">.</span><span class="nv">src</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h5 id="the-long-way-for-some-special-situations">The long way (for some special situations)</h5>

<p>This is where we&rsquo;ll start in PHP.</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">strlen</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span><span class="p">)){</span>
    <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberImage</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">hero_image</span><span class="p">);</span>
<span class="p">}</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$post</span><span class="p">;</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</code></pre>

<p><code class="prettyprint">TimberImage</code> should be initialized using a WordPress image ID#. It can also take URLs and image objects, but that requires extra processing.</p>

<p>You can now use all the above functions to transform your custom images in the same way, the format will be:</p>
<pre class="highlight twig"><code><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.hero_image.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">500</span><span class="p">,</span> <span class="nv">300</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<p>&hellip;etc</p>

          <h1 id="text-cookbook">Text Cookbook</h1>

<p>There&rsquo;s tons of stuff you can do with Twig and Timber filters to make complex transformations easy (and fun!)</p>

<h4 id="dates">Dates</h4>

<h5 id="timber-does-bylines-like-a-boss">Timber does bylines like a boss:</h5>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"byline"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"name"</span><span class="nt">&gt;</span>By <span class="cp">{{</span><span class="nv">post.author.name</span><span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.post_date</span><span class="o">|</span><span class="nf">date</span><span class="p">(</span><span class="s1">'F j, Y'</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h6 id="renders">Renders:</h6>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"byline"</span><span class="nt">&gt;&lt;span</span> <span class="na">class=</span><span class="s">"name"</span><span class="nt">&gt;</span>By Mr. WordPress<span class="nt">&lt;/span&gt;&lt;span</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span>September 28, 2013<span class="nt">&lt;/span&gt;&lt;/p&gt;</span>
</code></pre>

<h5 id="nothing-is-worse-than-an-out-of-date-copyright-year-in-the-footer-nothing">Nothing is worse than an out-of-date copyright year in the footer. Nothing.</h5>
<pre class="highlight twig"><code><span class="nt">&lt;footer&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"copyright"</span><span class="nt">&gt;</span><span class="ni">&amp;copy;</span> <span class="cp">{{</span><span class="nv">now</span><span class="o">|</span><span class="nf">date</span><span class="p">(</span><span class="s1">'Y'</span><span class="p">)</span><span class="cp">}}</span> by <span class="cp">{{</span><span class="nv">bloginfo</span><span class="p">(</span><span class="s1">'name'</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/footer&gt;</span>
</code></pre>

<h6 id="renders">Renders:</h6>
<pre class="highlight html"><code><span class="nt">&lt;footer&gt;&lt;p</span> <span class="na">class=</span><span class="s">"copyright"</span><span class="nt">&gt;</span><span class="ni">&amp;copy;</span> 2015 by The Daily Orange<span class="nt">&lt;/p&gt;&lt;/footer&gt;</span>
</code></pre>

<hr>

<h4 id="standard-transforms">Standard transforms</h4>

<h5 id="automatically-link-urls-email-addresses-twitter-s-and-s">Automatically link URLs, email addresses, twitter @s and #s</h5>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"tweet"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.content</span><span class="o">|</span><span class="nf">twitterify</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h5 id="run-wordpress-39-auto-paragraph-filter">Run WordPress&rsquo; auto-paragraph filter</h5>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.my_custom_text</span><span class="o">|</span><span class="nf">wpautop</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h5 id="run-wordpress-shortcodes-over-a-block-of-text">Run WordPress shortcodes over a block of text</h5>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.my_custom_text</span><span class="o">|</span><span class="nf">shortcodes</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h5 id="code-samples-lord-knows-i-39-ve-got-39-em">Code samples? Lord knows I&rsquo;ve got &lsquo;em:</h5>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"code-sample"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.code_samples</span><span class="o">|</span><span class="nf">pretags</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
</code></pre>

<h5 id="functions-inside-of-your-templates-plugin-calls">Functions inside of your templates, plugin calls:</h5>

<p>Old template:</p>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">&lt;?php twentytwelve_entry_meta(); ?&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>Timber-fied template:</p>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">function</span><span class="p">(</span><span class="s1">'twentytwelve_entry_meta'</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h5 id="functions-quot-with-params-quot-inside-of-your-templates-plugin-calls">Functions &ldquo;with params&rdquo; inside of your templates, plugin calls:</h5>

<p>Old template:</p>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">&lt;?php get_the_title($post-&gt;ID); ?&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>Timber-fied template:</p>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">function</span><span class="p">(</span><span class="s1">'get_the_title'</span><span class="p">,</span> <span class="nv">post.ID</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<hr>

<h3 id="internationalization">Internationalization</h3>

<h4 id="__">__()</h4>

<p>Timber comes built-in with your ordinary gettext function __() for l10n.</p>

<p>Old template:</p>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">&lt;?php _e('Posted on', 'my-text-domain') ?&gt;</span> [...]<span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>Timber-fied template:</p>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">__</span><span class="p">(</span><span class="s1">'Posted on'</span><span class="p">,</span> <span class="s1">'my-text-domain'</span><span class="p">)</span><span class="cp">}}</span> [...]<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h4 id="sprintf-notation">sprintf notation</h4>

<p>You can even use sprintf-type placeholders, using the <code class="prettyprint">format</code> filter:</p>

<p>Old template:</p>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">&lt;?php printf( __('Posted on %s', 'my-text-domain'), $posted_on_date ) ?&gt;</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<p>Timber-fied template:</p>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">__</span><span class="p">(</span><span class="s1">'Posted on %s'</span><span class="p">,</span> <span class="s1">'my-text-domain'</span><span class="p">)</span><span class="o">|</span><span class="nf">format</span><span class="p">(</span><span class="nv">posted_on_date</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h4 id="generating-po-files-using-poedit">Generating .po files using Poedit</h4>

<p>Unfortunately, Twig files with the above functions are not automatically parsed by gettext in Poedit. The quick and dirty workaround is to start each .twig file with <code class="prettyprint">{#&lt;?php#}</code> (by doing this, gettext will interpret whatever comes next as php, and start looking for <code class="prettyprint">__</code>).</p>

<p>A nicer solution is to use <a href="https://github.com/umpirsky/Twig-Gettext-Extractor">Twig-Gettext-Extractor</a>, a special Twig parser to Poedit. The linked page contains instructions on how to set it up.</p>

<p>Alternatively, you can use the parser for Python instead. This will throw a warning or two, but your strings are extracted! To add the parser, follow these steps:</p>

<ol>
<li>Create a Poedit project for your theme if you haven&rsquo;t already, and make sure to add <code class="prettyprint">__</code> on the <em>Sources keywords</em> tab.</li>
<li>Go to <em>Edit</em>-&gt;<em>Preferences</em>.</li>
<li>On the <em>Parsers</em> tab, add a new parser with these settings:

<ul>
<li>Language: <code class="prettyprint">Timber</code></li>
<li>List of extensions: <code class="prettyprint">*.twig</code></li>
<li>Parser command: <code class="prettyprint">xgettext --language=Python --add-comments=TRANSLATORS --force-po -o %o %C %K %F</code></li>
<li>An item in keyword list: <code class="prettyprint">-k%k</code></li>
<li>An item in input files list: <code class="prettyprint">%f</code></li>
<li>Source code charset: <code class="prettyprint">--from-code=%c</code></li>
</ul></li>
<li>Save and Update!</li>
</ol>

<hr>

<h3 id="debugging">Debugging</h3>

<h5 id="what-properties-are-inside-my-object">What properties are inside my object?</h5>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">dump</span><span class="p">(</span><span class="nv">post</span><span class="p">)</span><span class="cp">}}</span>
</code></pre>

<h5 id="what-properties-and-methods-are-inside-my-object">What properties and <em>methods</em> are inside my object?</h5>

<p>Warning: Experimental!</p>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">post</span><span class="o">|</span><span class="nf">print_a</span><span class="cp">}}</span>
</code></pre>

<p>This outputs both the database stuff (like {{post.post_content}}) and the contents of methods (like {{post.thumbnail}})</p>

<h5 id="what-type-of-object-am-i-working-with">What type of object am I working with?</h5>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">post</span><span class="o">|</span><span class="nf">get_class</span><span class="cp">}}</span>
</code></pre>

<p>&hellip; will output something like <code class="prettyprint">TimberPost</code> or your custom wrapper object</p>

          <h1 id="twig-cookbook">Twig Cookbook</h1>

<h2 id="using-twig-vars-in-live-type">Using Twig vars in live type</h2>

<p>Imagine this scenario, I let the users set this in the Admin panel:</p>
<pre class="highlight plaintext"><code>Copyright {{year}} by Upstatement, LLC. All Rights Reserved
</code></pre>

<p>But on the site I want it to render as:</p>
<pre class="highlight plaintext"><code>Copyright 2013 by Upstatement, LLC. All Rights Reserved
</code></pre>

<p>Ready? There are a bunch of ways, but my favorite is:</p>

<h4 id="in-your-php-file">In your PHP file</h4>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'year'</span><span class="p">]</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s1">'Y'</span><span class="p">);</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'copyright'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_option</span><span class="p">(</span><span class="s2">"footer_message"</span><span class="p">);</span> <span class="c1">//"Copyright {{year}} by Upstatement, LLC. All Rights Reserved"
</span><span class="nx">render_twig</span><span class="p">(</span><span class="s1">'footer.twig'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</code></pre>

<h4 id="in-your-html-file-let-39-s-say-footer-twig">In your HTML file (let&rsquo;s say <strong>footer.twig</strong>)</h4>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">include</span> <span class="nv">template_from_string</span><span class="p">(</span><span class="nv">copyright</span><span class="p">)</span> <span class="cp">%}</span>
</code></pre>

<h2 id="includes">Includes</h2>

<h3 id="simple-include">Simple include</h3>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">include</span> <span class="s2">"footer.twig"</span> <span class="cp">%}</span>
</code></pre>

<h4 id="notes">Notes</h4>

<ul>
<li>Make sure your file actually exists or you&rsquo;re going to have a bad time</li>
<li>Timber will look in your <code class="prettyprint">child-theme/views</code> directory first, then <code class="prettyprint">timber/views</code> directory</li>
<li>Don&rsquo;t forget the quote marks!</li>
</ul>

<h3 id="dynamic-includes">Dynamic includes</h3>

<p>Use a variable to determine the included file!</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">include</span> <span class="p">[</span><span class="s1">'blocks/block-'</span><span class="err">~</span><span class="nv">block.slug</span><span class="err">~</span><span class="s1">'.twig'</span><span class="p">,</span> <span class="s1">'blocks/blog.twig'</span><span class="p">]</span> <span class="nv">ignore</span> <span class="nv">missing</span> <span class="cp">%}</span>
</code></pre>

<h4 id="huh">Huh?</h4>

<ul>
<li>You&rsquo;re telling Twig to include an array of files</li>
<li>Same rules as above</li>
<li>~ (tilda) is what twig uses to concatenate a string with your variable</li>
</ul>

          <h1 id="custom-page-templates">Custom Page Templates</h1>

<p>There are a few ways to manage custom pages in WordPress and Timber, in order from simple-to-complex:</p>

<h3 id="custom-twig-file">Custom Twig File</h3>

<p>Say you&rsquo;ve created a page called &ldquo;About Us&rdquo; and WordPress has given it the slug <code class="prettyprint">about-us</code>. If you&rsquo;re using the <a href="https://github.com/Upstatement/timber-starter-theme">Timber Starter Theme</a> you can simply create a file called <code class="prettyprint">page-about-us.twig</code> inside your <code class="prettyprint">views</code> and go crazy. I recommend copying-and-pasting the contents of <a href="https://github.com/Upstatement/timber-starter-theme/blob/master/views/page.twig"><code class="prettyprint">page.twig</code></a> into here so you have something to work from.</p>

<h5 id="how-does-this-work">How does this work?</h5>

<p>In the <code class="prettyprint">page.php</code> file you&rsquo;ll see this code&hellip;</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'page-'</span> <span class="o">.</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">post_name</span> <span class="o">.</span> <span class="s1">'.twig'</span><span class="p">,</span> <span class="s1">'page.twig'</span><span class="p">),</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<p>Which is telling PHP to first look for a twig file named <code class="prettyprint">page-{{slug}}.twig</code> and falling back to <a href="https://github.com/Upstatement/timber-starter-theme/blob/master/views/page.twig"><code class="prettyprint">page.twig</code></a> if that doesn&rsquo;t exist.</p>

<hr>

<h3 id="custom-php-file">Custom PHP File</h3>

<p>If you need to do something special for this page in PHP, you can use standard WordPress <a href="http://codex.wordpress.org/Template_Hierarchy">template hierarchy</a> to gather and manipulate data for this page. In the above example, you would create a file called <code class="prettyprint">/wp-content/themes/my-theme/page-about-us.php</code> and populate it with the necessary PHP. Again, you can use the contents of the starter theme&rsquo;s <a href="https://github.com/Upstatement/timber-starter-theme/blob/master/page.php"><code class="prettyprint">page.php</code></a> file as a guide.</p>

<hr>

<h3 id="custom-page-template">Custom Page Template</h3>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/*
 * Template Name: My Custom Page
 * Description: A Page Template with a darker design.
 */</span>

<span class="c1">// Code to display Page goes here...
</span></code></pre>

<p>In the WordPress admin, this will now display in your page&rsquo;s list of available templates like so:</p>

<p><img alt="wordpress custom page template chooser" src="http://codex.wordpress.org/images/thumb/a/a3/page-templates-pulldown-screenshot.png/180px-page-templates-pulldown-screenshot.png" /></p>

<p>I recommend naming it something like <code class="prettyprint">/wp-content/themes/my-theme/template-my-custom-page.php</code>. Do NOT name it something beginning with <code class="prettyprint">page-</code> or WP will get very confused. Here&rsquo;s <a href="https://github.com/Upstatement/blades/blob/master/template-person.php">an example of what the PHP in this file</a> looks like.</p>

          <h1 id="debugging">Debugging</h1>

<h3 id="using-twig-39-s-native-functions">Using Twig&rsquo;s native functions</h3>

<p>Twig includes a <code class="prettyprint">dump</code> function that can output the properties of an object. To use <code class="prettyprint">WP_DEBUG</code> must be set to true.</p>

<h5 id="wp-config-php">wp-config.php</h5>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nb">define</span><span class="p">(</span><span class="s1">'WP_DEBUG'</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</code></pre>

<h5 id="single-twig">single.twig</h5>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">dump</span><span class="p">(</span><span class="nv">post</span><span class="p">)</span><span class="cp">}}</span>
</code></pre>

<p>Which will give you:</p>

<p><a href="http://imgur.com/5Xu53Fk"><img src="http://i.imgur.com/5Xu53Fk.png" title="Hosted by imgur.com"/></a></p>

<p>You can also dump <em>everything</em> sent to your template via:</p>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">dump</span><span class="p">()</span><span class="cp">}}</span>
</code></pre>

<p>This will give you something like:</p>
<pre class="highlight html"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://imgur.com/5ZD8VDd"</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">"http://i.imgur.com/5ZD8VDd.png"</span> <span class="na">title=</span><span class="s">"Hosted by imgur.com"</span><span class="nt">/&gt;&lt;/a&gt;</span>
</code></pre>

<hr>

<h3 id="using-timber-debug-bar-plugin">Using Timber Debug Bar plugin</h3>

<p>There&rsquo;s a <a href="http://wordpress.org/plugins/debug-bar-timber/">Timber add-on</a> for the <a href="https://wordpress.org/plugins/debug-bar/">WordPress debug bar</a>. Warning: this currently requries PHP 5.4. I&rsquo;m working on fixing whatever&rsquo;s going on for PHP 5.3</p>

<h3 id="using-legacy-timber-filters">Using (Legacy) Timber Filters</h3>

<p>You can also use some quick filters on an object. These are legacy and will be removed in favor of using Twig&rsquo;s built-in functionality. However, these do not require that WP_DEBUG be turned on.</p>
<pre class="highlight twig"><code>    <span class="cp">{{</span><span class="nv">post</span><span class="o">|</span><span class="nf">print_r</span><span class="cp">}}</span>
</code></pre>

          <h1 id="extending-objects">Extending Objects</h1>

<p>Myth: Timber is for making simple themes. Fact: It&rsquo;s for making incredibly complex themes <em>look</em> easy. But yes, you can also make simple sites from it.</p>

<p>The beauty of Timber is that the object-oriented nature lets you extend it to match the exact requirements of your theme.</p>

<p>Timber&rsquo;s objects like <code class="prettyprint">TimberPost</code>, <code class="prettyprint">TimberTerm</code>, etc. are a great starting point to build your own subclass from. For example, on this project each post was a part of an &ldquo;issue&rdquo; of a magazine. I wanted an easy way to reference the issue in the twig file:</p>
<pre class="highlight twig"><code><span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h3&gt;</span>From the <span class="cp">{{</span> <span class="nv">post.issue.title</span> <span class="cp">}}</span> issue<span class="nt">&lt;/h3&gt;</span>
</code></pre>

<p>Of course, <code class="prettyprint">TimberPost</code> has no built-in concept of an issue (which I&rsquo;ve built as a custom taxonomy called &ldquo;issues&rdquo;). So we&rsquo;re going to extend TimberPost to give it one:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">MySitePost</span> <span class="k">extends</span> <span class="nx">TimberPost</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">$_issue</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">issue</span><span class="p">()</span> <span class="p">{</span>
        <span class="nv">$issues</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_terms</span><span class="p">(</span><span class="s1">'issues'</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$issues</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$issues</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$issues</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>So now I&rsquo;ve got an easy way to refer to the {{ post.issue }} in our twig templates. If you want to make this production-ready I recommend a bit of internal caching so that you don&rsquo;t re-query every time you need to get the
issue data:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">class</span> <span class="nc">MySitePost</span> <span class="k">extends</span> <span class="nx">TimberPost</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">$_issue</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">issue</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_issue</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$issues</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_terms</span><span class="p">(</span><span class="s1">'issues'</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$issues</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$issues</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_issue</span> <span class="o">=</span> <span class="nv">$issues</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_issue</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Right now I&rsquo;m in the midst of building a complex site for a hybrid foundation and publication. The posts on the site have some very specific requirements that requires a fair amount of logic. I can take the simple <code class="prettyprint">TimberPost</code> object and extend it to make it work perfectly for this theme.</p>

<p>For example, I have a plugin that let&rsquo;s people insert manually related posts, but if they don&rsquo;t, WordPress will pull some automatically based on how the post is tagged.</p>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="k">class</span> <span class="nc">MySitePost</span> <span class="k">extends</span> <span class="nx">TimberPost</span> <span class="p">{</span>

        <span class="k">function</span> <span class="nf">get_related_auto</span><span class="p">()</span> <span class="p">{</span>
            <span class="nv">$tags</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">tags</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$tags</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$tags</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$search_tag</span> <span class="o">=</span> <span class="nv">$tags</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
                <span class="nv">$related</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="s1">'tag_id='</span><span class="o">.</span><span class="nv">$search_tag</span><span class="o">-&gt;</span><span class="na">ID</span><span class="p">);</span>
                <span class="k">return</span> <span class="nv">$related</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">//not tagged, cant do related on it
</span>                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">function</span> <span class="nf">get_related_manual</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">related_manual</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nb">is_array</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">related_manual</span><span class="p">)){</span>
                <span class="k">foreach</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">related_manual</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$related</span><span class="p">){</span>
                    <span class="nv">$related</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MySitePost</span><span class="p">(</span><span class="nv">$related</span><span class="p">);</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">related_manual</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">function</span> <span class="nf">related</span><span class="p">(</span><span class="nv">$limit</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$related</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_related_manual</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$related</span><span class="p">){</span>
                <span class="nv">$related</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get_related_auto</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$related</span><span class="p">))</span> <span class="p">{</span>
                <span class="nb">array_splice</span><span class="p">(</span><span class="nv">$related</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">$limit</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="nv">$related</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre>

<p>These can get pretty complex. And that&rsquo;s the beauty. The complexity lives inside the context of the object, but very simple when it comes to your templates.</p>

<h2 id="adding-to-twig">Adding to Twig</h2>

<p>This is the correct formation for when you need to add custom functions, filters to twig:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>

<span class="nx">add_filter</span><span class="p">(</span><span class="s1">'get_twig'</span><span class="p">,</span> <span class="s1">'add_to_twig'</span><span class="p">);</span>

<span class="k">function</span> <span class="nf">add_to_twig</span><span class="p">(</span><span class="nv">$twig</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* this is where you can add your own fuctions to twig */</span>
    <span class="nv">$twig</span><span class="o">-&gt;</span><span class="na">addExtension</span><span class="p">(</span><span class="k">new</span> <span class="nx">Twig_Extension_StringLoader</span><span class="p">());</span>
    <span class="nv">$twig</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="k">new</span> <span class="nx">Twig_SimpleFilter</span><span class="p">(</span><span class="s1">'whatever'</span><span class="p">,</span> <span class="s1">'my_whatever'</span><span class="p">));</span>
    <span class="k">return</span> <span class="nv">$twig</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">function</span> <span class="nf">my_whatever</span><span class="p">(</span><span class="nv">$text</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$text</span> <span class="o">.=</span> <span class="s1">' or whatever'</span><span class="p">;</span>
    <span class="k">return</span> <span class="nv">$text</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>This can now be called in your twig files with:</p>
<pre class="highlight twig"><code><span class="nt">&lt;h2&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span><span class="o">|</span><span class="nf">whatever</span> <span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
</code></pre>

<p>Which will output:</p>
<pre class="highlight twig"><code><span class="nt">&lt;h2&gt;</span>Hello World! or whatever<span class="nt">&lt;/h2&gt;</span>
</code></pre>

          <h1 id="filters">Filters</h1>

<h2 id="general-filters">General Filters</h2>

<p>Twig offers a variety of <a href="http://twig.sensiolabs.org/doc/filters/index.html">filters</a> to transform text and other information into the desired output. In addition, Timber has added some valuable custom filters for your WP theme:</p>

<h3 id="excerpt">excerpt</h3>

<p>When you need to trim text to a desired length (in words)</p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"intro"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.post_content</span><span class="o">|</span><span class="nf">excerpt</span><span class="p">(</span><span class="nv">30</span><span class="p">)</span><span class="cp">}}</span>...<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h6 id="output">Output:</h6>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"intro"</span><span class="nt">&gt;</span>Steve-O was born in London, England. His mother, Donna Gay (nÃ©e Wauthier), was Canadian, and his father, Richard Glover, was American. His paternal grandfather was English and his maternal step-grandfather ...<span class="nt">&lt;/p&gt;</span>
</code></pre>

<hr>

<h3 id="function">function</h3>

<p>Runs a function where you need. Really valuable for integrating plugins or existing themes</p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">function</span><span class="p">(</span><span class="s1">'twenty_ten_entry_meta'</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
</code></pre>

<h6 id="output">Output</h6>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span>Posted on September 6, 2013<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h3 id="function-deprecated">function (deprecated)</h3>

<p>Runs a function where you need. Really valuable for integrating plugins or existing themes</p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="s1">'twenty_ten_entry_meta'</span><span class="o">|</span><span class="nf">function</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
</code></pre>

<h6 id="output">Output</h6>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span>Posted on September 6, 2013<span class="nt">&lt;/div&gt;</span>
</code></pre>

<hr>

<h3 id="relative">relative</h3>

<p>Converts an absolute URL into a relative one, for example:</p>
<pre class="highlight twig"><code>My custom link is <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="s1">'http://example.org/2015/08/my-blog-post'</span> <span class="err">|</span> <span class="nv">relative</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>here!<span class="nt">&lt;/a&gt;</span>
</code></pre>
<pre class="highlight html"><code>My custom link is <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"/2015/08/my-blog-post"</span><span class="nt">&gt;</span>here!<span class="nt">&lt;/a&gt;</span>
</code></pre>

<hr>

<h3 id="pretags">pretags</h3>

<p>Converts tags like <code class="prettyprint">&lt;span&gt;</code> into <code class="prettyprint">&amp;lt;span&amp;gt;</code>, but only inside of <code class="prettyprint">&lt;pre&gt;</code> tags. Great for code samples when you need to preserve other formatting in the non-code sample content.</p>

<hr>

<h3 id="sanitize">sanitize</h3>

<p>Converts Titles like this into <code class="prettyprint">titles-like-this</code></p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="cp">{{</span><span class="nv">post.title</span><span class="o">|</span><span class="nf">sanitize</span><span class="cp">}}</span>
</code></pre>

<h6 id="output">Output:</h6>
<pre class="highlight html"><code>my-awesome-post
</code></pre>

<hr>

<h3 id="shortcodes">shortcodes</h3>

<p>Runs text through WordPress&rsquo;s shortcodes filter. In this example imagine that you&rsquo;ve added a shortcode to a custom field like <code class="prettyprint">[gallery id=&quot;123&quot; size=&quot;medium&quot;]</code></p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"gallery"</span><span class="nt">&gt;</span>
<span class="cp">{{</span><span class="nv">post.custom_shortcode_field</span><span class="o">|</span><span class="nf">shortcodes</span><span class="cp">}}</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre>

<h6 id="output">Output</h6>
<pre class="highlight html"><code><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">"gallery"</span><span class="nt">&gt;</span>
Here is my gallery <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"gallery"</span> <span class="na">id=</span><span class="s">"gallery-123"</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">"...."</span> <span class="nt">/&gt;</span>...<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</code></pre>

<hr>

<h3 id="time_ago">time_ago</h3>

<p>Displays a date in timeago format:</p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span>Posted: <span class="nt">&lt;time&gt;</span><span class="cp">{{</span><span class="nv">post.post_date_gmt</span><span class="o">|</span><span class="nf">time_ago</span><span class="cp">}}</span><span class="nt">&lt;/time&gt;&lt;/p&gt;</span>
</code></pre>

<h6 id="output">Output:</h6>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span>Posted: <span class="nt">&lt;time&gt;</span>3 days ago<span class="nt">&lt;/time&gt;&lt;/p&gt;</span>
</code></pre>

<hr>

<h3 id="truncate">truncate</h3>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.character.origin_story</span> <span class="err">|</span> <span class="nv">truncate</span><span class="p">(</span><span class="nv">8</span><span class="p">)</span> <span class="cp">}}</span> ...<span class="nt">&lt;/p&gt;</span>
</code></pre>

<h6 id="output">Output:</h6>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"entry-meta"</span><span class="nt">&gt;</span>Bruce Wayne's parents were shot outside the opera ...<span class="nt">&lt;/p&gt;</span>
</code></pre>

<hr>

<h3 id="wpautop">wpautop</h3>

<p>Adds paragraph breaks to new lines</p>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"body"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">post.custom_text_area</span><span class="o">|</span><span class="nf">wpautop</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h6 id="output">Output:</h6>
<pre class="highlight html"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"body"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;p&gt;</span>Sinatra said, "What do you do?"<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>"I'm a plumber," Ellison said.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>"No, no, he's not," another young man quickly yelled from across the table. "He wrote The Oscar."<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;p&gt;</span>"Oh, yeah," Sinatra said, "well I've seen it, and it's a piece of crap."<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<hr>

<h3 id="list">list</h3>

<p>Converts an array of strings into a comma-separated list.</p>

<h6 id="php">PHP:</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'contributors'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Blake Allen'</span><span class="p">,</span><span class="s1">'Rachel White'</span><span class="p">,</span><span class="s1">'Maddy May'</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig:</h6>
<pre class="highlight twig"><code>Contributions made by <span class="cp">{{</span><span class="nv">contributors</span><span class="o">|</span><span class="nf">list</span><span class="p">(</span><span class="s1">','</span><span class="p">,</span><span class="s1">'&amp;'</span><span class="p">)</span><span class="cp">}}</span>
</code></pre>

<h6 id="output">Output:</h6>
<pre class="highlight html"><code>Contributions made by Blake Allen, Rachel White <span class="err">&amp;</span> Maddy May
</code></pre>

          <h1 id="pagination">Pagination</h1>

<p>Do you like pagination? Stupid question, of course you do. Well, here&rsquo;s how you do it.</p>

<p>This will only work in a php file with an active query (like <code class="prettyprint">archive.php</code> or <code class="prettyprint">home.php</code>):</p>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'pagination'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_pagination</span><span class="p">();</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'archive.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<p>You can then markup the output like so  (of course, the exact markup is up to YOU):</p>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"tool-pagination"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">pagination.prev</span> <span class="cp">%}</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">pagination.prev.link</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"prev </span><span class="cp">{{</span><span class="nv">pagination.prev.link</span><span class="o">|</span><span class="nf">length</span> <span class="err">?</span> <span class="s1">''</span> <span class="err">:</span> <span class="s1">'invisible'</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>Prev<span class="nt">&lt;/a&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"pages"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">page</span> <span class="ow">in</span> <span class="nv">pagination.pages</span> <span class="cp">%}</span>
            <span class="nt">&lt;li&gt;</span>
                <span class="cp">{%</span> <span class="k">if</span> <span class="nv">page.link</span> <span class="cp">%}</span>
                    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">page.link</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">page.class</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">page.title</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
                <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
                    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">page.class</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">page.title</span><span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
                <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
            <span class="nt">&lt;/li&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">pagination.next</span> <span class="cp">%}</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">pagination.next.link</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"next </span><span class="cp">{{</span><span class="nv">pagination.next.link</span><span class="o">|</span><span class="nf">length</span> <span class="err">?</span> <span class="s1">''</span> <span class="err">:</span> <span class="s1">'invisible'</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>Next<span class="nt">&lt;/a&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<h3 id="what-if-i-39-m-not-using-the-default-query">What if I&rsquo;m not using the default query?</h3>

<p>So let&rsquo;s say you want to paginate things on <code class="prettyprint">page-events.php</code> where you list items from a custom post type of <code class="prettyprint">event</code>. Because the default query is just the request for the page&rsquo;s info, <strong>pagination will not work</strong>. You need to <em>make</em> it the default query by using the dreaded <code class="prettyprint">query_posts</code> like so:</p>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="k">global</span> <span class="nv">$paged</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$paged</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nv">$paged</span><span class="p">){</span>
        <span class="nv">$paged</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
    <span class="nv">$args</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'event'</span><span class="p">,</span>
        <span class="s1">'posts_per_page'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">,</span>
        <span class="s1">'paged'</span> <span class="o">=&gt;</span> <span class="nv">$paged</span>
    <span class="p">);</span>
    <span class="cm">/* THIS LINE IS CRUCIAL */</span>
    <span class="cm">/* in order for WordPress to know what to paginate */</span>
    <span class="cm">/* your args have to be the defualt query */</span>
        <span class="nx">query_posts</span><span class="p">(</span><span class="nv">$args</span><span class="p">);</span>
    <span class="cm">/* make sure you've got query_posts in your .php file */</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'pagination'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_pagination</span><span class="p">();</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'page-events.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h3 id="the-pre_get_posts-way">The pre_get_posts Way</h3>

<p>Custom <code class="prettyprint">query_posts</code> sometimes shows 404 on example.com/page/2. In that case you can also use <code class="prettyprint">pre_get_posts</code> in your functions.php file:</p>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="k">function</span> <span class="nf">my_home_query</span><span class="p">(</span> <span class="nv">$query</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">is_main_query</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">is_admin</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span> <span class="s1">'post_type'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'movie'</span><span class="p">,</span> <span class="s1">'post'</span> <span class="p">));</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">add_action</span><span class="p">(</span> <span class="s1">'pre_get_posts'</span><span class="p">,</span> <span class="s1">'my_home_query'</span> <span class="p">);</span>
</code></pre>

<p>In your archive.php or home.php template:</p>
<pre class="highlight php"><code>    <span class="cp">&lt;?php</span>
    <span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'pagination'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_pagination</span><span class="p">();</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'archive.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

          <h1 id="performance">Performance</h1>

<p>Timber, especially in conjunction with WordPress and Twig, offers a variety of caching strategies to optimize performance. Here&rsquo;s a quick rundown of some of the options, ranked in order of most-broad to most-focused.</p>

<h3 id="tl-dr">tl;dr</h3>

<p>In my tests with Debug Bar, Timber has no measurable performance hit. Everything compiles to PHP. @fabpot has an <a href="http://fabien.potencier.org/article/34/templating-engines-in-php">overview of the performance costs on his blog</a> (scroll down to the table)</p>

<p>You can&hellip;</p>

<ul>
<li><a href="#cache-everything">Cache Everything</a></li>
<li><a href="#cache-the-entire-twig-file-and-data">Cache the Entire Twig File and Data</a></li>
<li><a href="#cache-parts-of-the-twig-file-and-data">Cache Parts of the Twig File and Data</a></li>
<li><a href="#cache-the-twig-file-but-not-the-data">Cache the Twig File</a></li>
<li><a href="#cache-the-php-data">Cache the PHP data</a></li>
<li><a href="#measuring-performance">Measure Performance</a></li>
</ul>

<hr>

<h3 id="cache-everything">Cache Everything</h3>

<p>You can still use plugins like <a href="https://wordpress.org/plugins/w3-total-cache/">W3 Total Cache</a> in conjunction with Timber. In most settings, this will <em>skip</em> the Twig/Timber layer of your files and serve static pages via whatever mechanism the plugin or settings dictate.</p>

<hr>

<h3 id="cache-the-entire-twig-file-and-data">Cache the Entire Twig File and Data</h3>

<p>When rendering, use the <code class="prettyprint">$expires</code> argument in <code class="prettyprint">Timber::render</code>. For example:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
</code></pre>

<p>Timber will cache the template for 10 minutes (600 / 60 = 10). But here&rsquo;s the cool part. Timber hashes the fields in the view context. This means that as soon as the data changes, the cache is automatically invalidated (yay!).</p>

<p>Full Parameters:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span>
    <span class="nv">$filenames</span><span class="p">,</span>
    <span class="nv">$data</span><span class="p">,</span>
    <span class="nv">$expires</span><span class="p">,</span> <span class="sd">/** Default: false. False disables cache altogether. When passed an array, the first value is used for non-logged in visitors, the second for users **/</span>
    <span class="nv">$cache_mode</span> <span class="sd">/** Any of the cache mode constants defined in TimberLoader **/</span>
<span class="p">);</span>
</code></pre>

<p>The cache modes are:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">TimberLoader</span><span class="o">::</span><span class="na">CACHE_NONE</span> <span class="sd">/** Disable caching **/</span>
<span class="nx">TimberLoader</span><span class="o">::</span><span class="na">CACHE_OBJECT</span> <span class="sd">/** WP Object Cache **/</span>
<span class="nx">TimberLoader</span><span class="o">::</span><span class="na">CACHE_TRANSIENT</span>  <span class="sd">/** Transients **/</span>
<span class="nx">TimberLoader</span><span class="o">::</span><span class="na">CACHE_SITE_TRANSIENT</span> <span class="sd">/** Network wide transients **/</span>
<span class="nx">TimberLoader</span><span class="o">::</span><span class="na">CACHE_USE_DEFAULT</span> <span class="sd">/** Use whatever caching mechanism is set as the default for TimberLoader, the default is transient **/</span>
</code></pre>

<p>This method is very effective, but crude - the whole template is cached. So if you have any context dependent sub-views (eg. current user), this mode won&rsquo;t do.</p>

<hr>

<h3 id="cache-parts-of-the-twig-file-and-data">Cache <em>Parts</em> of the Twig File and Data</h3>

<p>This method implements the Twig Cache Extension. It adds the cache tag, for use in templates. Best shown by example:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="nv">cache</span> <span class="s1">'index/content'</span> <span class="nv">posts</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="ow">in</span> <span class="nv">posts</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">include</span> <span class="p">[</span><span class="s1">'tease-'</span><span class="err">~</span><span class="nv">post.post_type</span><span class="err">~</span><span class="s1">'.twig'</span><span class="p">,</span> <span class="s1">'tease.twig'</span><span class="p">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="nv">endcache</span> <span class="cp">%}</span>
</code></pre>

<p><code class="prettyprint">&#39;index/content&#39;</code> will be used as annotation (ie. label) for the cache, while <code class="prettyprint">posts</code> will be encoded with all its public fields. You can use anything for the label (&ldquo;foo&rdquo;, &ldquo;elephant&rdquo;, &ldquo;single-posts&rdquo;, whatever).</p>

<p>The mechanism behind it is the same as with render - the cache key is determined based on a hash of the object/array passed in (in the above example posts).</p>

<p>The cache method used is always the default mode, set using the bespoke filter (by default, transient cache).</p>

<p>This method allows for very fine-grained control over what parts of templates are being cached and which are not. When applied on resource-intensive sections, the performance difference is huge.</p>

<p>In your cache, the eventual key will be:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$annotation</span> <span class="o">.</span> <span class="s1">'__GCS__'</span> <span class="o">.</span> <span class="nv">$key</span>
</code></pre>

<p>That is in this scenario:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="s1">'index/content__GCS__'</span> <span class="o">.</span> <span class="nb">md5</span><span class="p">(</span> <span class="nb">json_encode</span><span class="p">(</span> <span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
</code></pre>

<h6 id="extra-timberkeygeneratorinterface">Extra: TimberKeyGeneratorInterface</h6>

<p>Instead of hashing a whole object, you can specify the cache key in the object itself. If the object implements TimberKeyGeneratorInterface, it can pass a unique key through the method get_cache_key. That way a class can for example simply pass last_updated as the unique key.
If arrays contain the key _cache_key, that one is used as cache key.</p>

<p>This may save yet another few processor cycles.</p>

<hr>

<h3 id="cache-the-twig-file-but-not-the-data">Cache the Twig File (but not the data)</h3>

<p>Every time you render a <code class="prettyprint">.twig</code> file, Twig compiles all the html tags and variables into a big, nasty blob of function calls and echo statements that actually gets run by PHP. In general, this is pretty efficient. However, you can cache the resulting PHP blob by turning on Twig&rsquo;s cache via:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="k">if</span> <span class="p">(</span><span class="nb">class_exists</span><span class="p">(</span><span class="s1">'Timber'</span><span class="p">)){</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="nv">$cache</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>You can look in your your <code class="prettyprint">/wp-content/plugins/timber/twig-cache</code> directory to see what these files look like.</p>

<p>This does not cache the <em>contents</em> of the variables. This is recommended as a last-step in the production process. Once enabled, any change you make to a <code class="prettyprint">.twig</code> file (just tweaking the html for example) will not go live until the cache is flushed.</p>

<hr>

<h3 id="cache-the-php-data">Cache the PHP data</h3>

<p>Sometimes the most expensive parts of the operations are generating the data needed to populate the twig template. You can of course use WordPress&rsquo;s default <a href="http://codex.wordpress.org/Transients_API">Transient API</a> to store this data.</p>

<p>You can also use some <a href="http://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a> to make the checking/saving/retrieving of transient data a bit easier:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* home.php */</span>

<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'main_stories'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">transient</span><span class="p">(</span><span class="s1">'main_stories'</span><span class="p">,</span> <span class="k">function</span><span class="p">(){</span>
    <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
    <span class="c1">//do something expensive with these posts
</span>    <span class="nv">$extra_teases</span> <span class="o">=</span> <span class="nx">get_field</span><span class="p">(</span><span class="s1">'my_extra_teases'</span><span class="p">,</span> <span class="s1">'options'</span><span class="p">);</span>
    <span class="k">foreach</span><span class="p">(</span><span class="nv">$extra_teases</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$tease</span><span class="p">){</span>
        <span class="nv">$tease</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">(</span><span class="nv">$tease</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nv">$main_stories</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$main_stories</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$posts</span><span class="p">;</span>
    <span class="nv">$main_stories</span><span class="p">[</span><span class="s1">'extra_teases'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$extra_teases</span><span class="p">;</span>
    <span class="k">return</span> <span class="nv">$main_stories</span><span class="p">;</span>
<span class="p">},</span> <span class="mi">600</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'home.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<p>Here <code class="prettyprint">main_stories</code> is a totally made-up variable. It could be called <code class="prettyprint">foo</code>, <code class="prettyprint">bar</code>, <code class="prettyprint">elephant</code>, etc.</p>

<hr>

<h3 id="measuring-performance">Measuring Performance</h3>

<p>Some tools like Debug Bar may not properly measure performance because its data (as in, the actual HTML it&rsquo;s generating to tell you the timing, number of queries, etc.) is swept-up by the page&rsquo;s cache.</p>

<p>Timber provides some quick shortcuts to measure page timing. Here&rsquo;s an example of them in action:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$start</span> <span class="o">=</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">start_timer</span><span class="p">();</span> <span class="c1">//this generates a starting time
</span><span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'whatever'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_my_foo</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">,</span> <span class="mi">600</span><span class="p">);</span>
<span class="k">echo</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">stop_timer</span><span class="p">(</span><span class="nv">$start</span><span class="p">);</span> <span class="c1">//this reports the time diff by passing the $start time
</span></code></pre>

          <h1 id="routing">Routing</h1>

<p>Among its other special powers, Timber includes modern routing in the Express.js/Ruby on Rails mold, making it easy for you to implement custom pagination&ndash;and anything else you might imagine in your wildest dreams of URLs and parameters. OMG so easy!</p>

<h4 id="some-examples">Some examples</h4>

<p>In your functions.php file, this can be called anywhere (don&rsquo;t hook it to init or another action or it might be called too late)</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Routes</span><span class="o">::</span><span class="na">map</span><span class="p">(</span><span class="s1">'blog/:name'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$params</span><span class="p">){</span>
    <span class="nv">$query</span> <span class="o">=</span> <span class="s1">'posts_per_page=3&amp;post_type='</span><span class="o">.</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'name'</span><span class="p">];</span>
    <span class="nx">Routes</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">'archive.php'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="nv">$query</span><span class="p">);</span>
<span class="p">});</span>

<span class="nx">Routes</span><span class="o">::</span><span class="na">map</span><span class="p">(</span><span class="s1">'blog/:name/page/:pg'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$params</span><span class="p">){</span>
    <span class="nv">$query</span> <span class="o">=</span> <span class="s1">'posts_per_page=3&amp;post_type='</span><span class="o">.</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span><span class="o">.</span><span class="s1">'&amp;paged='</span><span class="o">.</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'pg'</span><span class="p">];</span>
    <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'thing'</span> <span class="o">=&gt;</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span> <span class="o">=&gt;</span> <span class="s1">'I dont even know'</span><span class="p">);</span>
    <span class="nx">Routes</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">'archive.php'</span><span class="p">,</span> <span class="nv">$params</span><span class="p">,</span> <span class="nv">$query</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h4 id="map">map</h4>

<h6 id="routes-map-pattern-callback"><code class="prettyprint">Routes::map($pattern, $callback)</code></h6>

<h6 id="usage">Usage:</h6>

<p>A <code class="prettyprint">functions.php</code> where I want to display custom paginated content:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Routes</span><span class="o">::</span><span class="na">map</span><span class="p">(</span><span class="s1">'info/:name/page/:pg'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$params</span><span class="p">){</span>
    <span class="c1">//make a custom query based on incoming path and run it...
</span>    <span class="nv">$query</span> <span class="o">=</span> <span class="s1">'posts_per_page=3&amp;post_type='</span><span class="o">.</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span><span class="o">.</span><span class="s1">'&amp;paged='</span><span class="o">.</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'pg'</span><span class="p">]);</span>

    <span class="c1">//load up a template which will use that query
</span>    <span class="nx">Routes</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">'archive.php'</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nv">$query</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>

<h6 id="arguments">Arguments:</h6>

<p><code class="prettyprint">$pattern</code> (required)
Set a pattern for Timber to match on, by default everything is handled as a string. Any segment that begins with a <code class="prettyprint">:</code> is handled as a variable, for example:</p>

<p><strong>To paginate:</strong>
<code class="prettyprint">
page/:pagenum
</code></p>

<p><strong>To edit a user:</strong>
<code class="prettyprint">
my-users/:userid/edit
</code></p>

<p><code class="prettyprint">$callback</code>
A function that should fire when the pattern matches the request. Callback takes one argument which is an array of the parameters passed in the URL.</p>

<p>So in this example: <code class="prettyprint">&#39;info/:name/page/:pg&#39;</code>, $params would have data for:
* <code class="prettyprint">$data[&#39;name&#39;]</code>
* <code class="prettyprint">$data[&#39;pg&#39;]</code></p>

<p>&hellip; which you can use in the callback function as a part of your query</p>

<hr>

<h4 id="load">load</h4>

<h6 id="routes-load-php_file-args-query-null-status_code-200"><code class="prettyprint">Routes::load($php_file, $args, $query = null, $status_code = 200)</code></h6>

<h6 id="arguments">Arguments:</h6>

<p><code class="prettyprint">$php_file</code> (required)
A PHP file to load, in my experience this is usually your archive.php or a generic listing page (but don&rsquo;t worry it can be anything!)</p>

<p><code class="prettyprint">$template_params</code>
Any data you want to send to the resulting view. Example:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>

<span class="nx">Routes</span><span class="o">::</span><span class="na">map</span><span class="p">(</span><span class="s1">'info/:name/page/:pg'</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$params</span><span class="p">){</span>
    <span class="c1">//make a custom query based on incoming path and run it...
</span>    <span class="nv">$query</span> <span class="o">=</span> <span class="s1">'posts_per_page=3&amp;post_type='</span><span class="o">.</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'name'</span><span class="p">]</span><span class="o">.</span><span class="s1">'&amp;paged='</span><span class="o">.</span><span class="nb">intval</span><span class="p">(</span><span class="nv">$params</span><span class="p">[</span><span class="s1">'pg'</span><span class="p">]);</span>

    <span class="c1">//load up a template which will use that query
</span>    <span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
    <span class="nv">$params</span><span class="p">[</span><span class="s1">'my_title'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'This is my custom title'</span><span class="p">;</span>
    <span class="nx">Routes</span><span class="o">::</span><span class="na">load</span><span class="p">(</span><span class="s1">'archive.php'</span><span class="p">,</span> <span class="nv">$params</span><span class="p">,</span> <span class="nv">$query</span><span class="p">,</span> <span class="mi">200</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* archive.php */</span>

<span class="k">global</span> <span class="nv">$params</span><span class="p">;</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'wp_title'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">'my_title'</span><span class="p">];</span> <span class="c1">// "This is my custom title"
</span><span class="cm">/* the rest as normal... */</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'archive.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">)</span>
</code></pre>

<p><code class="prettyprint">$query</code>
The query you want to use, it can accept a string or array just like <code class="prettyprint">Timber::get_posts</code> &ndash; use the standard WP_Query syntax (or a WP_Query object too)</p>

<p><code class="prettyprint">$status_code</code>
Send an optional status code. Defaults to 200 for &lsquo;Success/OK&rsquo;</p>

          <h1 id="sidebars">Sidebars</h1>

<h2 id="so-you-want-a-sidebar">So you want a sidebar?</h2>

<h3 id="method-1-php-file">Method 1: PHP file</h3>

<p>Let&rsquo;s say every page on the site has the same content going into its sidebar. If so, you would:
Create a <code class="prettyprint">sidebar.php</code> file in your theme directory (so <code class="prettyprint">wp-content/themes/mytheme/sidebar.php</code>)</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* sidebar.php */</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'widget'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">my_function_to_get_widget</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'ad'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">my_function_to_get_an_ad</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'sidebar.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<ul>
<li>Use that php file within your main php file (home.php, single.php, archive.php, etc):</li>
</ul>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'sidebar'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_sidebar</span><span class="p">(</span><span class="s1">'sidebar.php'</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<ul>
<li>In the final twig file make sure you reserve a spot for your sidebar:</li>
</ul>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">sidebar</span><span class="cp">}}</span>
<span class="nt">&lt;/aside&gt;</span>
</code></pre>

<hr>

<h3 id="method-2-twig-file">Method 2: Twig file</h3>

<p>In this example, you would populate your sidebar from your main PHP file (home.php, single.php, archive.php, etc).</p>

<ul>
<li>Make a Twig file for what your sidebar should be:</li>
</ul>
<pre class="highlight twig"><code><span class="c">{# views/sidebar-related.twig #}</span>
<span class="nt">&lt;h3&gt;</span>Related Stories<span class="nt">&lt;/h3&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="ow">in</span> <span class="nv">related</span> <span class="cp">%}</span>
    <span class="nt">&lt;h4&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.get_path</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.post_title</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/h4&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<ul>
<li>Send data to it via your main PHP file:</li>
</ul>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nv">$post_cat</span> <span class="o">=</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">get_terms</span><span class="p">(</span><span class="s1">'category'</span><span class="p">);</span>
<span class="nv">$post_cat</span> <span class="o">=</span> <span class="nv">$post_cat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ID</span><span class="p">;</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$post</span><span class="p">;</span>

<span class="nv">$sidebar_context</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$sidebar_context</span><span class="p">[</span><span class="s1">'related'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="s1">'cat='</span><span class="o">.</span><span class="nv">$post_cat</span><span class="p">);</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'sidebar'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_sidebar</span><span class="p">(</span><span class="s1">'sidebar-related.twig'</span><span class="p">,</span> <span class="nv">$sidebar_context</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<ul>
<li>In the final twig file, make sure you have spot for your sidebar:</li>
</ul>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"sidebar"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">sidebar</span><span class="cp">}}</span>
<span class="nt">&lt;/aside&gt;</span>
</code></pre>

<hr>

<h3 id="method-3-dynamic">Method 3: Dynamic</h3>

<p>This is using WordPress&rsquo;s built-in dynamic_sidebar tools (which, confusingly, are referred to as &ldquo;Widgets&rdquo; in the interface). Since sidebar is already used; I used widgets in the code to describe these:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'dynamic_sidebar'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_widgets</span><span class="p">(</span><span class="s1">'dynamic_sidebar'</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'sidebar.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>
<pre class="highlight twig"><code><span class="nt">&lt;aside</span> <span class="na">class=</span><span class="s">"my-sidebar"</span><span class="nt">&gt;</span>
<span class="cp">{{</span><span class="nv">dynamic_sidebar</span><span class="cp">}}</span>
<span class="nt">&lt;/aside&gt;</span>
</code></pre>

          <h1 id="template-locations">Template Locations</h1>

<p>You can set arbitrary locations for your twig files with&hellip;</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="nx">Timber</span><span class="o">::</span><span class="nv">$locations</span> <span class="o">=</span> <span class="s1">'/Users/jared/Sandbox/templates'</span><span class="p">;</span>
</code></pre>

<p>Use the full file path to make sure Timber knows what you&rsquo;re trying to draw from. You can also send an array for multiple locations:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="nx">Timber</span><span class="o">::</span><span class="nv">$locations</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">'/Users/jared/Sandbox/templates'</span><span class="p">,</span>
                            <span class="s1">'~/Sites/timber-templates/'</span><span class="p">,</span>
                            <span class="nx">ABSPATH</span><span class="o">.</span><span class="s1">'/wp-content/templates'</span>
                        <span class="p">);</span>
</code></pre>

<p>You only need to do this once in your project (like in <code class="prettyprint">functions.php</code>) then when you call from a PHP file (say <code class="prettyprint">single.php</code>) Timber will look for twig files in these locations before the child/parent theme.</p>

<hr>

<h3 id="changing-the-default-folder-for-twig-files">Changing the default folder for .twig files</h3>

<p>By default, Timber looks in your child and parent theme&rsquo;s <code class="prettyprint">views</code> directory to pull <code class="prettyprint">.twig</code> files. If you don&rsquo;t like the default <code class="prettyprint">views</code> directory (which by default resides in your theme folder) you can change that to. Example: I want to use <code class="prettyprint">/wp-content/themes/my-theme/twigs</code>:</p>

<h6 id="configure-with-a-string">Configure with a string:</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="nx">Timber</span><span class="o">::</span><span class="nv">$dirname</span> <span class="o">=</span> <span class="s1">'twigs'</span><span class="p">;</span>
</code></pre>

<h6 id="you-can-also-send-an-array-with-fallbacks">You can also send an array with fallbacks:</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* functions.php */</span>
<span class="nx">Timber</span><span class="o">::</span><span class="nv">$dirname</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'templates'</span><span class="p">,</span> <span class="s1">'templates/shared/mods'</span><span class="p">,</span> <span class="s1">'twigs'</span><span class="p">,</span> <span class="s1">'views'</span><span class="p">);</span>
</code></pre>

<p>A quick note on <strong>subdirectories</strong>: you can always reference these relatively. For example:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'shared/headers/header-home.twig'</span><span class="p">);</span>
</code></pre>

<p>&hellip; might correspond to a file in <code class="prettyprint">/wp-content/themes/my-theme/views/shared/headers/header-home.twig</code>.</p>

          <h1 id="testing">Testing</h1>

<h3 id="phpunit">PHPUnit</h3>

<p>To setup tests</p>

<ul>
<li>Git clone VVV: <code class="prettyprint">git clone git@github.com:Varying-Vagrant-Vagrants/VVV.git</code></li>
<li>Navigate into the <code class="prettyprint">www</code> folder and git clone timber <code class="prettyprint">git clone git@github.com:timber/timber.git</code></li>
<li>Login to Vagrant SSH: <code class="prettyprint">vagrant ssh</code></li>
<li>Navigate to your Timber folder <code class="prettyprint">cd /srv/www/timber</code></li>
<li>Install dependencies <code class="prettyprint">composer install</code></li>
<li>Run PHPUnit! <code class="prettyprint">phpunit</code></li>
</ul>

<h5 id="full-code">Full code</h5>
<pre class="highlight plaintext"><code>cd ~/Sites
git clone git@github.com:Varying-Vagrant-Vagrants/VVV.git
cd VVV/www
git clone git@github.com:timber/timber.git
vagrant ssh
cd /srv/www/timber
composer install
phpunit
</code></pre>

<h5 id="gotchas">Gotchas!</h5>

<ul>
<li><p>You may need to setup authorization between VVV and GitHub. Just follow the prompts to create a token if that interrupts the <code class="prettyprint">composer install</code></p></li>
<li><p>You may have <a href="https://getcomposer.org/doc/articles/troubleshooting.md#proc-open-fork-failed-errors">memory problems with Composer</a> just run this if that happens, here&rsquo;s the script I run:</p></li>
</ul>
<pre class="highlight plaintext"><code>sudo /bin/dd if=/dev/zero of=/var/swap.1 bs=1M count=1024
sudo /sbin/mkswap /var/swap.1
sudo /sbin/swapon /var/swap.1
</code></pre>

          <h1 id="woocommerce">WooCommerce</h1>

<h2 id="point-of-entry-main-woocommerce-php-file">Point of entry - main WooCommerce PHP file</h2>

<p>The first step to get your WooCommerce project integrated with Timber is creating a file named <code class="prettyprint">woocommerce.php</code> in the root of your theme. That will establish the context and data to be passed to your twig files:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>

<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">class_exists</span><span class="p">(</span><span class="s1">'Timber'</span><span class="p">)){</span>
    <span class="k">echo</span> <span class="s1">'Timber not activated. Make sure you activate the plugin in &lt;a href="/wp-admin/plugins.php#timber"&gt;/wp-admin/plugins.php&lt;/a&gt;'</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="nv">$context</span>            <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'sidebar'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_widgets</span><span class="p">(</span><span class="s1">'shop-sidebar'</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">is_singular</span><span class="p">(</span><span class="s1">'product'</span><span class="p">))</span> <span class="p">{</span>

    <span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span>    <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_post</span><span class="p">();</span>
    <span class="nv">$product</span>            <span class="o">=</span> <span class="nx">get_product</span><span class="p">(</span> <span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">ID</span> <span class="p">);</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'product'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$product</span><span class="p">;</span>

    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'views/woo/single-product.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

    <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'products'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$posts</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">is_product_category</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$queried_object</span> <span class="o">=</span> <span class="nx">get_queried_object</span><span class="p">();</span>
        <span class="nv">$term_id</span> <span class="o">=</span> <span class="nv">$queried_object</span><span class="o">-&gt;</span><span class="na">term_id</span><span class="p">;</span>
        <span class="nv">$context</span><span class="p">[</span><span class="s1">'category'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">get_term</span><span class="p">(</span> <span class="nv">$term_id</span><span class="p">,</span> <span class="s1">'product_cat'</span> <span class="p">);</span>
        <span class="nv">$context</span><span class="p">[</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">single_term_title</span><span class="p">(</span><span class="s1">''</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'views/woo/archive.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>

<span class="p">}</span>
</code></pre>

<p>You will now need the two twig files loaded from <code class="prettyprint">woocommerce.php</code>:</p>

<h2 id="archives">Archives</h2>

<p>Create a Twig file accordingly to the location asked by the above file, in this example that would be <code class="prettyprint">views/woo/archive.twig</code>:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"base.twig"</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

    <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_before_main_content'</span><span class="p">)</span> <span class="cp">%}</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"before-shop-loop"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span> <span class="s1">'woocommerce_before_shop_loop'</span><span class="p">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"loop"</span><span class="nt">&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="ow">in</span> <span class="nv">products</span> <span class="cp">%}</span>

            <span class="cp">{%</span> <span class="k">include</span> <span class="p">[</span><span class="s2">"partials/tease-product.twig"</span><span class="p">]</span> <span class="cp">%}</span>

        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/div&gt;</span>

    <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_after_shop_loop'</span><span class="p">)</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_after_main_content'</span><span class="p">)</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endblock</span>  <span class="cp">%}</span>
</code></pre>

<p>You&rsquo;ll notice the inclusion of several woocommerce&rsquo;s default hooks, which you&rsquo;ll need to keep the integration seamless and allow any WooCommerce extension plugin to still work.</p>

<p>Next, we&rsquo;ll take care of the single product view.</p>

<h2 id="single-product">Single Product</h2>

<p>Create a Twig file accordingly to the location asked by the above file, in this example that would be <code class="prettyprint">views/woo/single-product.twig</code>:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">"base.twig"</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

    <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_before_single_product'</span><span class="p">)</span> <span class="cp">%}</span>

    <span class="nt">&lt;article</span> <span class="na">itemscope</span> <span class="na">itemtype=</span><span class="s">"http://schema.org/Product"</span> <span class="na">class=</span><span class="s">"single-product-details </span><span class="cp">{{</span><span class="nv">post.class</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"entry-images"</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_before_single_product_summary'</span><span class="p">)</span> <span class="cp">%}</span>
            <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span><span class="p">(</span><span class="s1">'shop_single'</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/div&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"summary entry-summary"</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_single_product_summary'</span><span class="p">)</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>

        <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_after_single_product_summary'</span><span class="p">)</span> <span class="cp">%}</span>

        <span class="nt">&lt;meta</span> <span class="na">itemprop=</span><span class="s">"url"</span> <span class="na">content=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.link</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;/article&gt;</span>

    <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_after_single_product'</span><span class="p">)</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endblock</span>  <span class="cp">%}</span>
</code></pre>

<p>Again we are keep things simple by using WooCommerce&rsquo;s default hooks.
If you need to override the output of any of those hooks, my advice would be to remove and add the relevant actions using PHP, keeping your upgrade path simple.</p>

<p>Finally, we&rsquo;ll need to create a teaser file for product in the loops. Considering the code above that  would be <code class="prettyprint">views/partials/tease-product.twig</code>:</p>

<h2 id="tease-product">Tease Product</h2>
<pre class="highlight twig"><code>
<span class="nt">&lt;article</span> <span class="cp">{{</span> <span class="nv">fn</span><span class="p">(</span><span class="s1">'post_class'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'$classes'</span><span class="p">,</span> <span class="s1">'entry'</span><span class="p">]</span> <span class="p">)</span> <span class="cp">}}</span><span class="nt">&gt;</span>

    <span class="cp">{{</span> <span class="nv">fn</span><span class="p">(</span><span class="s1">'timber_set_product'</span><span class="p">,</span> <span class="nv">post</span><span class="p">)</span><span class="cp">}}</span>

    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"Media"</span><span class="nt">&gt;</span>

        <span class="cp">{%</span> <span class="k">if</span> <span class="nv">showthumb</span> <span class="cp">%}</span>
            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"Media-figure </span><span class="cp">{%</span> <span class="k">if</span> <span class="ow">not</span> <span class="nv">post.thumbnail</span> <span class="cp">%}</span><span class="s">placeholder</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="s">"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
                    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">post.thumbnail</span> <span class="cp">%}</span>
                        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">post_thumb_size</span><span class="p">[</span><span class="nv">0</span><span class="p">],</span> <span class="nv">post_thumb_size</span><span class="p">[</span><span class="nv">1</span><span class="p">])</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
                    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
                        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"thumb-placeholder"</span><span class="nt">&gt;&lt;i</span> <span class="na">class=</span><span class="s">"icon-camera"</span><span class="nt">&gt;&lt;/i&gt;&lt;/span&gt;</span>
                    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
                <span class="nt">&lt;/a&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
        <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"Media-content"</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'woocommerce_before_shop_loop_item_title'</span><span class="p">)</span> <span class="cp">%}</span>
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">post.title</span> <span class="cp">%}</span>
                <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"entry-title"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/h3&gt;</span>
            <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
                <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"entry-title"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">fn</span><span class="p">(</span><span class="s1">'the_title'</span><span class="p">)</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/h3&gt;</span>
            <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
            <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span> <span class="s1">'woocommerce_after_shop_loop_item_title'</span> <span class="p">)</span> <span class="cp">%}</span>
            <span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span> <span class="s1">'woocommerce_after_shop_loop_item'</span> <span class="p">)</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;/article&gt;</span>

</code></pre>

<p>This should all sound familiar by now, except for one line:</p>
<pre class="highlight twig"><code><span class="cp">{{</span> <span class="nv">fn</span><span class="p">(</span><span class="s1">'timber_set_product'</span><span class="p">,</span> <span class="nv">post</span><span class="p">)</span><span class="cp">}}</span>
</code></pre>

<p>For some reason products in the loop don&rsquo;t get the right context by default. This line will call the following function that you need to add somewhere in your <code class="prettyprint">functions.php</code> file:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">function</span> <span class="nf">timber_set_product</span><span class="p">(</span> <span class="nv">$post</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">global</span> <span class="nv">$product</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">is_woocommerce</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nv">$product</span> <span class="o">=</span> <span class="nx">get_product</span><span class="p">(</span><span class="nv">$post</span><span class="o">-&gt;</span><span class="na">ID</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Without this, some elements of the listed products would show the same information as the first product in the loop.</p>

<p><em>Note:</em> Some users reported issues with the loop context even when using the <code class="prettyprint">timber_set_product</code> helper function. Turns out the default WooCommerce hooks interfere with the output of the aforementioned function.</p>

<p>One way to get around this is by building your own image calls, that means removing WooCommerce&rsquo;s default hooks and declare on your template the html to show the image:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">if</span> <span class="nv">post.thumbnail</span> <span class="cp">%}</span>
   <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">shop_thumbnail_image_size</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre>

<p>To remove the default image, add the following to your <code class="prettyprint">functions.php</code> file:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">remove_action</span><span class="p">(</span><span class="s1">'woocommerce_before_shop_loop_item_title'</span><span class="p">,</span> <span class="s1">'woocommerce_template_loop_product_thumbnail'</span><span class="p">);</span>
</code></pre>

<p>This comes with the added benefit that you&rsquo;ll have total control over where your image is created in the markup.</p>

          <h1 id="wordpress-integration">WordPress Integration</h1>

<p>Timber plays nice with your existing WordPress setup. You can still use other plugins, etc. Here&rsquo;s a rundown of the key points:</p>

<ul>
<li><a href="#the_content">the_content</a></li>
<li><a href="#hooks">WordPress Hooks</a></li>
<li><a href="#scripts--stylesheets">Scripts + Stylesheets</a></li>
<li><a href="#functions">Functions</a></li>
<li><a href="#actions">Actions</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#widgets">Widgets</a></li>
<li><a href="#shortcodes">Shortcodes</a></li>
</ul>

<hr>

<h3 id="the_content">the_content</h3>

<p>You&rsquo;re probably used to calling <code class="prettyprint">the_content()</code> in your theme file. This is good. Before outputting, WordPress will run all the filters and actions that your plugins and themes are using. If you want to get this into your new Timber theme (and you probably do). Call it like this:</p>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"my-article"</span><span class="nt">&gt;</span>
   <span class="cp">{{</span><span class="nv">post.content</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>This differs from <code class="prettyprint">{{post.post_content}}</code> which is the raw text stored in your database</p>

<hr>

<h3 id="hooks">Hooks</h3>

<p>Timber hooks to interact with WordPress use <code class="prettyprint">this/style/of_hooks</code> instead of <code class="prettyprint">this_style_of_hooks</code>. This matches the same methodology as <a href="http://www.advancedcustomfields.com/resources/#actions">Advanced Custom Fields</a>.</p>

<p>Full documentation to come</p>

<hr>

<h3 id="scripts-stylesheets">Scripts + Stylesheets</h3>

<p>What happened to <code class="prettyprint">wp_head()</code> and <code class="prettyprint">wp_footer()</code>? Don&rsquo;t worry, they haven&rsquo;t gone away. In fact, they have a home now in the <code class="prettyprint">Timber::get_context()</code> object. When you setup your PHP file, you should do something like this:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</code></pre>

<p>Now in the corresponding Twig file:</p>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
    <span class="c">&lt;!-- Add whatever you need in the head, and then...--&gt;</span>
    <span class="cp">{{</span><span class="nv">wp_head</span><span class="cp">}}</span>
    <span class="nt">&lt;/head&gt;</span>

    <span class="c">&lt;!-- etc... --&gt;</span>

    <span class="nt">&lt;footer&gt;</span>
        Copyright <span class="ni">&amp;copy;</span> <span class="cp">{{</span><span class="s2">"now"</span><span class="o">|</span><span class="nf">date</span><span class="p">(</span><span class="s1">'Y'</span><span class="p">)</span><span class="cp">}}</span>
    <span class="nt">&lt;/footer&gt;</span>
    <span class="cp">{{</span><span class="nv">wp_footer</span><span class="cp">}}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

<p>WordPress will inject whatever output had been loaded into <code class="prettyprint">wp_head()</code> and <code class="prettyprint">wp_footer()</code> through these variables.</p>

<hr>

<h4 id="functions">Functions</h4>

<p>But my theme/plugin has some functions I need! Do I really have to re-write all of them?</p>

<p>No.</p>

<p>Let&rsquo;s say you modified twentyeleven and need some of the functions back. Here&rsquo;s the quick-and-dirty way:</p>
<pre class="highlight twig"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"posted-on"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">function</span><span class="p">(</span><span class="s2">"twentyeleven_posted_on"</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>Oh. That&rsquo;s not so bad. What if there are arguments? Easy:</p>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"admin-tools"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">function</span><span class="p">(</span><span class="s1">'edit_post_link'</span><span class="p">,</span> <span class="s1">'Edit'</span><span class="p">,</span> <span class="s1">'&lt;span class="edit-link"&gt;'</span><span class="p">,</span> <span class="s1">'&lt;/span&gt;'</span><span class="p">)</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>Nice! Any gotchas? Unfortunately yes. While the above example will totally work in a single.twig file it will not in a loop. Why? Single.twig/single.php retain the context of the current post. Thus for a function like <code class="prettyprint">edit_post_link</code> (which will try to guess the ID# of the post you want to edit, based on the current post in the loop), the same function requires some modification in a file like <code class="prettyprint">archive.twig</code> or <code class="prettyprint">index.twig</code>. There, you will need to explicitly set the post ID:</p>
<pre class="highlight twig"><code><span class="c">{# index.twig #}</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"admin-tools"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">function</span><span class="p">(</span><span class="s1">'edit_post_link'</span><span class="p">,</span> <span class="s1">'Edit'</span><span class="p">,</span> <span class="s1">'&lt;span class="edit-link"&gt;'</span><span class="p">,</span> <span class="s1">'&lt;/span&gt;'</span><span class="p">,</span> <span class="nv">post.ID</span><span class="p">)</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre>

<p>You can also use <code class="prettyprint">fn(&#39;my_function&#39;)</code> as an alias.</p>

<p>For a less quick-and-dirty way, you can use the TimberFunctionWrapper. This class sets up your PHP functions as functions you can use in your Twig templates. It will execute them only when you actually call them in your template. You can quickly set up a TimberFunctionWrapper using <code class="prettyprint">TimberHelper</code>:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="sd">/**
 * @param string $function_name
 * @param array (optional) $defaults
 * @param bool (optional) $return_output_buffer Return function output instead of return value (default: false)
 * @return \TimberFunctionWrapper
 */</span>
<span class="nx">TimberHelper</span><span class="o">::</span><span class="na">function_wrapper</span><span class="p">(</span> <span class="nv">$function_name</span><span class="p">,</span> <span class="nv">$defaults</span> <span class="o">=</span> <span class="k">array</span><span class="p">(),</span> <span class="nv">$return_output_buffer</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">);</span>
</code></pre>

<p>So if you want to add <code class="prettyprint">edit_post_link</code> to your context, you can do something like this:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="cm">/* single.php */</span>
<span class="nv">$data</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'edit_post_link'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">function_wrapper</span><span class="p">(</span> <span class="s1">'edit_post_link'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="nx">__</span><span class="p">(</span> <span class="s1">'Edit'</span> <span class="p">),</span> <span class="s1">'&lt;span class="edit-link"&gt;'</span><span class="p">,</span> <span class="s1">'&lt;/span&gt;'</span> <span class="p">)</span> <span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
</code></pre>

<p>Now you can use it like a &lsquo;normal&rsquo; function:</p>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"admin-tools"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">edit_post_link</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
<span class="c">{# Calls edit_post_link using default arguments #}</span>

<span class="c">{# single-my-post-type.twig #}</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"admin-tools"</span><span class="nt">&gt;</span>
    <span class="cp">{{</span><span class="nv">edit_post_link</span><span class="p">(</span><span class="nv">null</span><span class="p">,</span> <span class="s1">'&lt;span class="edit-my-post-type-link"&gt;'</span><span class="p">)</span><span class="cp">}}</span>
<span class="nt">&lt;/div&gt;</span>
<span class="c">{# Calls edit_post_link with all defaults, except for second argument #}</span>
</code></pre>

<h2 id="actions">Actions</h2>

<p>Call them in your Twig template&hellip;</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'my_action'</span><span class="p">)</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">do</span> <span class="nv">action</span><span class="p">(</span><span class="s1">'my_action_with_args'</span><span class="p">,</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">)</span> <span class="cp">%}</span>
</code></pre>

<p>&hellip; in your <code class="prettyprint">functions.php</code> file:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">add_action</span><span class="p">(</span><span class="s1">'my_action'</span><span class="p">,</span> <span class="s1">'my_function'</span><span class="p">);</span>

<span class="k">function</span> <span class="nf">my_function</span><span class="p">(</span><span class="nv">$context</span><span class="p">){</span>
    <span class="c1">//$context stores the template context in case you need to reference it
</span>    <span class="k">echo</span> <span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">post_title</span><span class="p">;</span> <span class="c1">//outputs title of yr post
</span><span class="p">}</span>
</code></pre>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">add_action</span><span class="p">(</span><span class="s1">'my_action_with_args'</span><span class="p">,</span> <span class="s1">'my_function_with_args'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>

<span class="k">function</span> <span class="nf">my_function_with_args</span><span class="p">(</span><span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s1">'I say '</span><span class="o">.</span><span class="nv">$foo</span><span class="o">.</span><span class="s1">' and '</span><span class="o">.</span><span class="nv">$bar</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>You can still get the context object when passing args, it&rsquo;s always the <em>last</em> argument&hellip;</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nx">add_action</span><span class="p">(</span><span class="s1">'my_action_with_args'</span><span class="p">,</span> <span class="s1">'my_function_with_args'</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>

<span class="k">function</span> <span class="nf">my_function_with_args</span><span class="p">(</span><span class="nv">$foo</span><span class="p">,</span> <span class="nv">$bar</span><span class="p">,</span> <span class="nv">$context</span><span class="p">){</span>
    <span class="k">echo</span> <span class="s1">'I say '</span><span class="o">.</span><span class="nv">$foo</span><span class="o">.</span><span class="s1">' and '</span><span class="o">.</span><span class="nv">$bar</span><span class="p">;</span>
    <span class="k">echo</span> <span class="s1">'For the post with title '</span><span class="o">.</span><span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">post_title</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>

<p>Please note the argument count that WordPress requires for <code class="prettyprint">add_action</code></p>

<hr>

<h2 id="filters">Filters</h2>
<pre class="highlight twig"><code><span class="cp">{{</span> <span class="nv">post.content</span><span class="o">|</span><span class="nf">apply_filters</span><span class="p">(</span><span class="s1">'my_filter'</span><span class="p">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="s2">"my custom string"</span><span class="o">|</span><span class="nf">apply_filters</span><span class="p">(</span><span class="s1">'my_filter'</span><span class="p">,</span><span class="nv">param1</span><span class="p">,</span><span class="nv">param2</span><span class="p">,</span><span class="err">...</span><span class="p">)</span> <span class="cp">}}</span>
</code></pre>

<hr>

<h3 id="widgets">Widgets</h3>

<p>Everyone loves widgets!
Of course they do&hellip;</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$data</span><span class="p">[</span><span class="s1">'footer_widgets'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_widgets</span><span class="p">(</span><span class="s1">'footer_widgets'</span><span class="p">);</span>
</code></pre>

<p>&hellip;where &#39;footer_widgets&rsquo; is the registered name of the widgets you want to get(in twentythirteen these are called <code class="prettyprint">sidebar-1</code> and <code class="prettyprint">sidebar-2</code> )</p>

<p>Then use it in your template:</p>
<pre class="highlight twig"><code><span class="c">{# base.twig #}</span>
<span class="nt">&lt;footer&gt;</span>
    <span class="cp">{{</span><span class="nv">footer_widgets</span><span class="cp">}}</span>
<span class="nt">&lt;/footer&gt;</span>
</code></pre>

<hr>

<h3 id="using-timber-inside-your-own-widgets">Using Timber inside your own widgets</h3>

<p>You can also use twig templates for your widgets!
Let&rsquo;s imagine we want a widget that shows a random number each time it is rendered.</p>

<p>Inside the widget class, the widget function is used to show the widget:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">widget</span><span class="p">(</span><span class="nv">$args</span><span class="p">,</span> <span class="nv">$instance</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$number</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">();</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'random-widget.twig'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'args'</span> <span class="o">=&gt;</span> <span class="nv">$args</span><span class="p">,</span> <span class="s1">'instance'</span> <span class="o">=&gt;</span> <span class="nv">$instance</span><span class="p">,</span> <span class="s1">'number'</span> <span class="o">=&gt;</span> <span class="nv">$number</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>

<p>The corresponding template file <code class="prettyprint">random-widget.twig</code> looks like this:</p>
<pre class="highlight twig"><code><span class="cp">{{</span> <span class="nv">args.before_widget</span> <span class="err">|</span> <span class="nv">raw</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">args.before_title</span> <span class="err">|</span> <span class="nv">raw</span> <span class="cp">}}{{</span> <span class="nv">instance.title</span> <span class="err">|</span> <span class="nv">apply_filters</span><span class="p">(</span><span class="s1">'widget_title'</span><span class="p">)</span> <span class="cp">}}{{</span> <span class="nv">args.after_title</span> <span class="err">|</span> <span class="nv">raw</span> <span class="cp">}}</span>

<span class="nt">&lt;p&gt;</span>Your magic number is: <span class="nt">&lt;strong&gt;</span><span class="cp">{{</span> <span class="nv">number</span> <span class="cp">}}</span><span class="nt">&lt;/strong&gt;&lt;/p&gt;</span>

<span class="cp">{{</span> <span class="nv">args.after_widget</span> <span class="err">|</span> <span class="nv">raw</span> <span class="cp">}}</span>
</code></pre>

<p>The raw filter is needed here to embed the widget properly.</p>

<p>You may also want to check if the Timber plugin was loaded before using it:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">widget</span><span class="p">(</span><span class="nv">$args</span><span class="p">,</span> <span class="nv">$instance</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">class_exists</span><span class="p">(</span><span class="s1">'Timber'</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// if you want to show some error message, this is the right place
</span>        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$number</span> <span class="o">=</span> <span class="nb">rand</span><span class="p">();</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'random-widget.twig'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'args'</span> <span class="o">=&gt;</span> <span class="nv">$args</span><span class="p">,</span> <span class="s1">'instance'</span> <span class="o">=&gt;</span> <span class="nv">$instance</span><span class="p">,</span> <span class="s1">'number'</span> <span class="o">=&gt;</span> <span class="nv">$number</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>

<hr>

<h4 id="shortcodes">Shortcodes</h4>

<p>Well, if it works for widgets, why shouldn&rsquo;t it work for shortcodes ?
Of course it does !</p>

<p>Let&rsquo;s implement a <code class="prettyprint">[youtube]</code> shorttag which embeds a youtube video.
For the desired usage of <code class="prettyprint">[youtube id=xxxx]</code> we only need a few lines of code:</p>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// should be called from within an init action hook
</span><span class="nx">add_shortcode</span><span class="p">(</span><span class="s1">'youtube'</span><span class="p">,</span> <span class="s1">'youtube_shorttag'</span><span class="p">);</span>

<span class="k">function</span> <span class="nf">youtube_shorttag</span><span class="p">(</span><span class="nv">$atts</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$atts</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$id</span> <span class="o">=</span> <span class="nx">sanitize_text_field</span><span class="p">(</span><span class="nv">$atts</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$id</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// this time we use Timber::compile since shorttags should return the code
</span>    <span class="k">return</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">compile</span><span class="p">(</span><span class="s1">'youtube-short.twig'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="nv">$id</span><span class="p">));</span>
<span class="p">}</span>
</code></pre>

<p>In <code class="prettyprint">youtube-short.twig</code> we have the following template:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">if</span> <span class="nv">id</span> <span class="cp">%}</span>
<span class="nt">&lt;iframe</span> <span class="na">width=</span><span class="s">"560"</span> <span class="na">height=</span><span class="s">"315"</span> <span class="na">src=</span><span class="s">"//www.youtube.com/embed/</span><span class="cp">{{</span> <span class="nv">id</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">frameborder=</span><span class="s">"0"</span> <span class="na">allowfullscreen</span><span class="nt">&gt;&lt;/iframe&gt;</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre>

<p>Now, when the YouTube embed code changes, we only need to edit the <code class="prettyprint">youtube-short.twig</code> template. No need to search your PHP files for this one particular line.</p>

<h5 id="layouts-with-shortcodes">Layouts with Shortcodes</h5>

<p>Timber and Twig can process your shortcodes by using the <code class="prettyprint">{% filter shortcodes %}</code> tag. Let&rsquo;s say you&rsquo;re using a <code class="prettyprint">[tab]</code> shortcode, for example:</p>
<pre class="highlight twig"><code><span class="cp">{%</span> <span class="k">filter</span> <span class="nv">shortcodes</span> <span class="cp">%}</span>
    [tabs tab1="Tab 1 title" tab2="Tab 2 title" layout="horizontal" backgroundcolor="" inactivecolor=""]
        [tab id=1]
            Something something something
        [/tab]

        [tab id=2]
            Tab 2 content here
        [/tab]
    [/tabs]
<span class="cp">{%</span> <span class="k">endfilter</span> <span class="cp">%}</span>
</code></pre>

          <h1 id="object-reference">Object Reference</h1>

          <h1 id="timber-timber">Timber\Timber</h1>

<p>Timber Class. Main class called Timber for this plugin.</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
 <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
 <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="s1">'post_type = article'</span><span class="p">)</span>
 <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'article'</span><span class="p">,</span> <span class="s1">'category_name'</span> <span class="o">=&gt;</span> <span class="s1">'sports'</span><span class="p">));</span> <span class="c1">// uses wp_query format.
</span> <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="mi">23</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">35</span><span class="p">,</span><span class="mi">67</span><span class="p">),</span> <span class="s1">'InkwellArticle'</span><span class="p">);</span>
 <span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span> <span class="c1">// returns wp favorites!
</span> <span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$posts</span><span class="p">;</span>
 <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#compile">compile</a></td>
<td>bool/string</td>
<td></td>
</tr>
<tr>
<td><a href="#compile_string">compile_string</a></td>
<td>bool/string</td>
<td></td>
</tr>
<tr>
<td><a href="#fetch">fetch</a></td>
<td>bool/string</td>
<td></td>
</tr>
<tr>
<td><a href="#get_calling_script_dir">get_calling_script_dir</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#get_calling_script_file">get_calling_script_file</a></td>
<td>string/null</td>
<td></td>
</tr>
<tr>
<td><a href="#get_context">get_context</a></td>
<td>array</td>
<td></td>
</tr>
<tr>
<td><a href="#get_pagination">get_pagination</a></td>
<td>array</td>
<td>mixed</td>
</tr>
<tr>
<td><a href="#get_post">get_post</a></td>
<td>array/bool/null</td>
<td></td>
</tr>
<tr>
<td><a href="#get_posts">get_posts</a></td>
<td>array/bool/null</td>
<td></td>
</tr>
<tr>
<td><a href="#get_sidebar">get_sidebar</a></td>
<td>bool/string</td>
<td></td>
</tr>
<tr>
<td><a href="#get_sidebar_from_php">get_sidebar_from_php</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#get_sites">get_sites</a></td>
<td>array</td>
<td></td>
</tr>
<tr>
<td><a href="#get_term">get_term</a></td>
<td>\Timber\Timber\Term/\Timber\WP_Error/null</td>
<td></td>
</tr>
<tr>
<td><a href="#get_terms">get_terms</a></td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td><a href="#get_widgets">get_widgets</a></td>
<td>\Timber\TimberFunctionWrapper</td>
<td></td>
</tr>
<tr>
<td><a href="#query_post">query_post</a></td>
<td>array/bool/null</td>
<td></td>
</tr>
<tr>
<td><a href="#query_posts">query_posts</a></td>
<td>array/bool/null</td>
<td></td>
</tr>
<tr>
<td><a href="#render">render</a></td>
<td>bool/string</td>
<td></td>
</tr>
<tr>
<td><a href="#render_string">render_string</a></td>
<td>bool/string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<h2 id="add_route"><strike>add_route</strike></h2>

<p><strong>DEPRECATED</strong> since 0.20.0 and will be removed in 1.1</p>

<p><code class="prettyprint">add_route( mixed $route, \Timber\callable $callback, array $args=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Add route.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$route</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$callback</td>
<td>\Timber\callable</td>
<td></td>
</tr>
<tr>
<td>$args</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="compile">compile</h2>

<p><code class="prettyprint">compile( mixed $filenames, array $data=array(), bool $expires=false, string $cache_mode=&quot;default&quot;, bool $via_render=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<p>Compile function.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$filenames</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$expires</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$cache_mode</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$via_render</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h2 id="compile_string">compile_string</h2>

<p><code class="prettyprint">compile_string( mixed $string, array $data=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<p>Compile string.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$string</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="fetch">fetch</h2>

<p><code class="prettyprint">fetch( mixed $filenames, array $data=array(), bool $expires=false, string $cache_mode=&quot;default&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<p>Fetch function.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$filenames</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$expires</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$cache_mode</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_calling_script_dir">get_calling_script_dir</h2>

<p><code class="prettyprint">get_calling_script_dir( mixed $offset )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Get calling script dir.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$offset</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_calling_script_file"><strike>get_calling_script_file</strike></h2>

<p><strong>DEPRECATED</strong> since 0.20.0</p>

<p><code class="prettyprint">get_calling_script_file( mixed $offset )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string/null</code> </p>

<p>Get calling script file.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$offset</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_context">get_context</h2>

<p><code class="prettyprint">get_context( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Get context.</p>

<h2 id="get_pagination">get_pagination</h2>

<p><code class="prettyprint">get_pagination( array $prefs=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> mixed</p>

<p>Get pagination.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$prefs</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_post">get_post</h2>

<p><code class="prettyprint">get_post( bool $query=false, string $PostClass=&quot;Timber\Post&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/bool/null</code> </p>

<p>Get post.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$query</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$PostClass</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_posts">get_posts</h2>

<p><code class="prettyprint">get_posts( bool $query=false, string $PostClass=&quot;Timber\Post&quot;, bool $return_collection=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/bool/null</code> </p>

<p>Get posts.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$query</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$PostClass</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$return_collection</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
     <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="s1">'post_type = article'</span><span class="p">)</span>
     <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">'post_type'</span> <span class="o">=&gt;</span> <span class="s1">'article'</span><span class="p">,</span> <span class="s1">'category_name'</span> <span class="o">=&gt;</span> <span class="s1">'sports'</span><span class="p">));</span> <span class="c1">// uses wp_query format.
</span>     <span class="nv">$posts</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">(</span><span class="s1">'post_type=any'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'portfolio'</span> <span class="o">=&gt;</span> <span class="s1">'MyPortfolioClass'</span><span class="p">,</span> <span class="s1">'alert'</span> <span class="o">=&gt;</span> <span class="s1">'MyAlertClass'</span><span class="p">));</span> <span class="c1">//use a classmap for the $PostClass
</span></code></pre>

<h2 id="get_sidebar">get_sidebar</h2>

<p><code class="prettyprint">get_sidebar( string $sidebar=&quot;&quot;, array $data=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<p>Get sidebar.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$sidebar</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_sidebar_from_php">get_sidebar_from_php</h2>

<p><code class="prettyprint">get_sidebar_from_php( string $sidebar=&quot;&quot;, mixed $data )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Get sidebar from PHP</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$sidebar</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_sites">get_sites</h2>

<p><code class="prettyprint">get_sites( bool/array/bool $blog_ids=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Get sites.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$blog_ids</td>
<td>bool/array/bool</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_term">get_term</h2>

<p><code class="prettyprint">get_term( int/\Timber\WP_Term/object $term, string $taxonomy=&quot;post_tag&quot;, string $TermClass=&quot;Timber\Term&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\Timber\Term/\Timber\WP_Error/null</code> </p>

<p>Get term.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$term</td>
<td>int/\Timber\WP_Term/object</td>
<td></td>
</tr>
<tr>
<td>$taxonomy</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$TermClass</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_terms">get_terms</h2>

<p><code class="prettyprint">get_terms( mixed/string/array $args=null, array $maybe_args=array(), string $TermClass=&quot;Timber\Term&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<p>Get terms.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$args</td>
<td>mixed/string/array</td>
<td></td>
</tr>
<tr>
<td>$maybe_args</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$TermClass</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_widgets">get_widgets</h2>

<p><code class="prettyprint">get_widgets( mixed $widget_id )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\TimberFunctionWrapper</code> </p>

<p>Get widgets.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$widget_id</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="init_constants">init_constants</h2>

<p><code class="prettyprint">init_constants( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<h2 id="query_post">query_post</h2>

<p><code class="prettyprint">query_post( bool $query=false, string $PostClass=&quot;Timber\Post&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/bool/null</code> </p>

<p>Query post.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$query</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$PostClass</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="query_posts">query_posts</h2>

<p><code class="prettyprint">query_posts( bool $query=false, string $PostClass=&quot;Timber\Post&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/bool/null</code> </p>

<p>Query posts.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$query</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$PostClass</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="render">render</h2>

<p><code class="prettyprint">render( mixed $filenames, array $data=array(), bool $expires=false, string $cache_mode=&quot;default&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<p>Render function.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$filenames</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$expires</td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td>$cache_mode</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="render_string">render_string</h2>

<p><code class="prettyprint">render_string( mixed $string, array $data=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<p>Render string.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$string</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="init">init</h2>

<p><code class="prettyprint">init( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<h2 id="test_compatibility">test_compatibility</h2>

<p><code class="prettyprint">test_compatibility( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Tests whether we can use Timber</p>

          <h1 id="timber-archives">Timber\Archives</h1>

<p>The TimberArchives class is used to generate a menu based on the date archives of your posts. The <a href="http://nieman.harvard.edu/news/">Nieman Foundation News site</a> has an example of how the output can be used in a real site (<a href="https://cloud.githubusercontent.com/assets/1298086/9610076/3cdca596-50a5-11e5-82fd-acb74c09c482.png">screenshot</a>).</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'archives'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberArchives</span><span class="p">(</span> <span class="nv">$args</span> <span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">archives.items</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">item.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">item.name</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">child</span> <span class="ow">in</span> <span class="nv">item.children</span> <span class="cp">%}</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">child.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">child.name</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span>2015<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>May<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>April<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>March<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>February<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>January<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>2014<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>December<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>November<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"child"</span><span class="nt">&gt;</span>October<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#__construct">__construct</a></td>
<td>void</td>
<td></td>
</tr>
<tr>
<td><a href="#get_items">get_items</a></td>
<td>array/string</td>
<td></td>
</tr>
<tr>
<td>items</td>
<td>array</td>
<td>the items of the archives to iterate through and markup for your page</td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( mixed $args=null, string $base=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$args</td>
<td>mixed</td>
<td>array of arguments {</td>
</tr>
<tr>
<td>$base</td>
<td>string</td>
<td>any additional paths that need to be prepended to the URLs that are generated, for example: &ldquo;tags&rdquo;</td>
</tr>
</tbody></table>

<h2 id="get_items">get_items</h2>

<p><code class="prettyprint">get_items( mixed/array/string $args=null )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$args</td>
<td>mixed/array/string</td>
<td></td>
</tr>
</tbody></table>

<p><em>This class extends \Timber\Core</em></p>

          <h1 id="timber-comment">Timber\Comment</h1>

<p>The TimberComment class is used to view the output of comments. 99% of the time this will be in the context of the comments on a post. However you can also fetch a comment directly using its comment ID.</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$comment</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberComment</span><span class="p">(</span><span class="nv">$comment_id</span><span class="p">);</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'comment_of_the_day'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$comment</span><span class="p">;</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">comment_of_the_day.content</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment-attribution"</span><span class="nt">&gt;</span>- <span class="cp">{{</span><span class="nv">comment.author.name</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>But, O Sarah! If the dead can come back to this earth and flit unseen around those they loved, I shall always be near you; in the garish day and in the darkest night -- amidst your happiest scenes and gloomiest hours - always, always; and if there be a soft breeze upon your cheek, it shall be my breath; or the cool air fans your throbbing temple, it shall be my spirit passing by.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment-attribution"</span><span class="nt">&gt;</span>- Sullivan Ballou<span class="nt">&lt;/p&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#approved">approved</a></td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td><a href="#author">author</a></td>
<td>\Timber\User</td>
<td></td>
</tr>
<tr>
<td><a href="#avatar">avatar</a></td>
<td>bool/mixed/string</td>
<td></td>
</tr>
<tr>
<td><a href="#children">children</a></td>
<td>array</td>
<td>Comments</td>
</tr>
<tr>
<td><a href="#content">content</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#date">date</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#is_child">is_child</a></td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td><a href="#reply_link">reply_link</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#time">time</a></td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( int $cid )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$cid</td>
<td>int</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__tostring">__toString</h2>

<p><code class="prettyprint">__toString( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<h2 id="add_child">add_child</h2>

<p><code class="prettyprint">add_child( \Timber\Comment $child_comment )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$child_comment</td>
<td>\Timber\Comment</td>
<td></td>
</tr>
</tbody></table>

<h2 id="approved">approved</h2>

<p><code class="prettyprint">approved( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">boolean</code> </p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">comment.approved</span> <span class="cp">%}</span>
        Your comment is good
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
        Do you kiss your mother with that mouth?
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre>

<h2 id="author">author</h2>

<p><code class="prettyprint">author( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\User</code> </p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h3&gt;</span>Comments by...<span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;ol&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="ow">in</span> <span class="nv">post.comments</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;</span><span class="cp">{{</span><span class="nv">comment.author.name</span><span class="cp">}}</span>, who is a <span class="cp">{{</span><span class="nv">comment.author.role</span><span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ol&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;h3&gt;</span>Comments by...<span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;ol&gt;</span>
        <span class="nt">&lt;li&gt;</span>Jared Novack, who is a contributor<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span>Katie Ricci, who is a subscriber<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span>Rebecca Pearl, who is a author<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ol&gt;</span>
</code></pre>

<h2 id="avatar">avatar</h2>

<p><code class="prettyprint">avatar( mixed/int $size=92, string $default=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/mixed/string</code> </p>

<p>Fetches the Gravatar</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$size</td>
<td>mixed/int</td>
<td></td>
</tr>
<tr>
<td>$default</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">comment.avatar</span><span class="p">(</span><span class="nv">36</span><span class="p">,</span><span class="nv">template_uri</span><span class="err">~</span><span class="s2">"img/dude.jpg"</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span> <span class="na">alt=</span><span class="s">"Image of </span><span class="cp">{{</span><span class="nv">comment.author.name</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://gravatar.com/i/sfsfsdfasdfsfa.jpg"</span> <span class="na">alt=</span><span class="s">"Image of Katherine Rich"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="children">children</h2>

<p><code class="prettyprint">children( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> Comments</p>

<h2 id="content">content</h2>

<p><code class="prettyprint">content( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="date">date</h2>

<p><code class="prettyprint">date( string $date_format=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$date_format</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="ow">in</span> <span class="nv">post.comments</span> <span class="cp">%}</span>
    <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span>Posted on <span class="cp">{{</span> <span class="nv">comment.date</span> <span class="cp">}}</span>:<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">comment.content</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/article&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span>Posted on September 28, 2015:<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>Happy Birthday!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/article&gt;</span>
</code></pre>

<h2 id="is_child">is_child</h2>

<p><code class="prettyprint">is_child( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<h2 id="meta">meta</h2>

<p><code class="prettyprint">meta( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="reply_link">reply_link</h2>

<p><code class="prettyprint">reply_link( string $reply_text=&quot;Reply&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Enqueue the WP threaded comments javascript, and fetch the reply link for various comments.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$reply_text</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="time">time</h2>

<p><code class="prettyprint">time( string $time_format=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$time_format</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="ow">in</span> <span class="nv">post.comments</span> <span class="cp">%}</span>
    <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span>Posted on <span class="cp">{{</span> <span class="nv">comment.date</span> <span class="cp">}}</span> at <span class="cp">{{</span><span class="nv">comment.time</span><span class="cp">}}</span>:<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">comment.content</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/article&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;article</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"date"</span><span class="nt">&gt;</span>Posted on September 28, 2015 at 12:45 am:<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"comment"</span><span class="nt">&gt;</span>Happy Birthday!<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/article&gt;</span>
</code></pre>

<p><em>This class extends \Timber\Core</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-image">Timber\Image</h1>

<p>If TimberPost is the class you&rsquo;re going to spend the most time, TimberImage is the class you&rsquo;re going to have the most fun with.</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$post</span><span class="p">;</span>
<span class="c1">// lets say you have an alternate large 'cover image' for your post stored in a custom field which returns an image ID
</span><span class="nv">$cover_image_id</span> <span class="o">=</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">cover_image</span><span class="p">;</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'cover_image'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberImage</span><span class="p">(</span><span class="nv">$cover_image_id</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;article&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">cover_image.src</span><span class="cp">}}</span><span class="s">"</span> <span class="na">class=</span><span class="s">"cover-image"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"headline"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"body"</span><span class="nt">&gt;</span>
        <span class="cp">{{</span><span class="nv">post.content</span><span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">Image</span><span class="p">(</span><span class="nv">post.custom_field_with_image_id</span><span class="p">)</span><span class="err">.</span><span class="nv">src</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">alt=</span><span class="s">"Another way to initialize images as TimberImages, but within Twig"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/article&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;article&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/06/nevermind.jpg"</span> <span class="na">class=</span><span class="s">"cover-image"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"headline"</span><span class="nt">&gt;</span>Now you've done it!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"body"</span><span class="nt">&gt;</span>
        Whatever whatever
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/06/kurt.jpg"</span> <span class="na">alt=</span><span class="s">"Another way to initialize images as TimberImages, but within Twig"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/article&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#alt">alt</a></td>
<td>string</td>
<td>alt text stored in WordPress</td>
</tr>
<tr>
<td><a href="#aspect">aspect</a></td>
<td>\Timber\float</td>
<td></td>
</tr>
<tr>
<td>caption</td>
<td>string</td>
<td>$caption the string stored in the WordPress database</td>
</tr>
<tr>
<td>class</td>
<td>string</td>
<td>$class stores the CSS classes for the post (ex: &ldquo;post post-type-book post-123&rdquo;)</td>
</tr>
<tr>
<td>file_loc</td>
<td>string</td>
<td>$file_loc the location of the image file in the filesystem (ex: <code class="prettyprint">/var/www/htdocs/wp-content/uploads/2015/08/my-pic.jpg</code>)</td>
</tr>
<tr>
<td><a href="#height">height</a></td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>the ID of the image (which is a WP_Post)</td>
</tr>
<tr>
<td><a href="#link">link</a></td>
<td>void</td>
<td></td>
</tr>
<tr>
<td><a href="#parent">parent</a></td>
<td>bool/\Timber\TimberPost</td>
<td></td>
</tr>
<tr>
<td><a href="#path">path</a></td>
<td>string</td>
<td>the /relative/path/to/the/file</td>
</tr>
<tr>
<td>post_status</td>
<td>string</td>
<td>$post_status    the status of a post (&ldquo;draft&rdquo;, &ldquo;publish&rdquo;, etc.)</td>
</tr>
<tr>
<td>post_type</td>
<td>string</td>
<td>$post_type      the name of the post type, this is the machine name (so &ldquo;my_custom_post_type&rdquo; as opposed to &ldquo;My Custom Post Type&rdquo;)</td>
</tr>
<tr>
<td>slug</td>
<td>string</td>
<td>$slug       the URL-safe slug, this corresponds to the poorly-named &ldquo;post_name&rdquo; in the WP database, ex: &ldquo;hello-world&rdquo;</td>
</tr>
<tr>
<td><a href="#src">src</a></td>
<td>bool/string</td>
<td></td>
</tr>
<tr>
<td><a href="#width">width</a></td>
<td>int</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( int/string $iid )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Creates a new TimberImage object</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$iid</td>
<td>int/string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="c1">// You can pass it an ID number
</span>    <span class="nv">$myImage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberImage</span><span class="p">(</span><span class="mi">552</span><span class="p">);</span>
        <span class="c1">//Or send it a URL to an image
</span>    <span class="nv">$myImage</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberImage</span><span class="p">(</span><span class="s1">'http://google.com/logo.jpg'</span><span class="p">);</span>
</code></pre>

<h2 id="__tostring">__toString</h2>

<p><code class="prettyprint">__toString( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the src of the file</p>

<h2 id="alt">alt</h2>

<p><code class="prettyprint">alt( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> alt text stored in WordPress</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.src</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">alt=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.alt</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/08/pic.jpg"</span> <span class="na">alt=</span><span class="s">"W3 Checker told me to add alt text, so I am"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="aspect">aspect</h2>

<p><code class="prettyprint">aspect( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\float</code> </p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">post.thumbnail.aspect</span> <span class="o">&lt;</span> <span class="nv">1</span> <span class="cp">%}</span>
        <span class="c">{# handle vertical image #}</span>
        <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">300</span><span class="p">,</span> <span class="nv">500</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">alt=</span><span class="s">"A basketball player"</span> <span class="nt">/&gt;</span>
    <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
           <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.thumbnail.src</span><span class="o">|</span><span class="nf">resize</span><span class="p">(</span><span class="nv">500</span><span class="p">)</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">alt=</span><span class="s">"A sumo wrestler"</span> <span class="nt">/&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre>

<h2 id="get_pathinfo">get_pathinfo</h2>

<p><code class="prettyprint">get_pathinfo( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Get a PHP array with pathinfo() info from the file</p>

<h2 id="get_url"><strike>get_url</strike></h2>

<p><strong>DEPRECATED</strong> since 0.21.9 use src() instead</p>

<p><code class="prettyprint">get_url( string $size=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$size</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="height">height</h2>

<p><code class="prettyprint">height( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">int</code> </p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.src</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">height=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.height</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/08/pic.jpg"</span> <span class="na">height=</span><span class="s">"900"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Returns the link to an image attachment&rsquo;s Permalink page (NOT the link for the image itself!!)</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.link</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.src</span> <span class="cp">}}</span><span class="s"> "</span><span class="nt">/&gt;&lt;/a&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://example.org/my-cool-picture"</span><span class="nt">&gt;&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/whatever.jpg"</span><span class="nt">/&gt;&lt;/a&gt;</span>
</code></pre>

<h2 id="parent">parent</h2>

<p><code class="prettyprint">parent( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/\Timber\TimberPost</code> </p>

<h2 id="path">path</h2>

<p><code class="prettyprint">path( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the /relative/path/to/the/file</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.path</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"wp-content/uploads/2015/08/pic.jpg"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="src">src</h2>

<p><code class="prettyprint">src( string $size=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$size</td>
<td>string</td>
<td>a size known to WordPress (like &ldquo;medium&rdquo;)</td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/08/pic.jpg"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="url"><strike>url</strike></h2>

<p><strong>DEPRECATED</strong> since 0.21.9 use src() instead</p>

<p><code class="prettyprint">url( string $size=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$size</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="width">width</h2>

<p><code class="prettyprint">width( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">int</code> </p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.src</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">width=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">image.width</span> <span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"http://example.org/wp-content/uploads/2015/08/pic.jpg"</span> <span class="na">width=</span><span class="s">"1600"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="wp_upload_dir">wp_upload_dir</h2>

<p><code class="prettyprint">wp_upload_dir( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<h2 id="get_post_custom">get_post_custom</h2>

<p><code class="prettyprint">get_post_custom( mixed $iid )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$iid</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<p><em>This class extends \Timber\Post</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-menu">Timber\Menu</h1>

<p>In Timber, you can use TimberMenu() to make a standard Wordpress menu available to the Twig template as an object you can loop through. And once the menu becomes available to the context, you can get items from it in a way that is a little smoother and more versatile than Wordpress&rsquo;s wp_nav_menu. (You need never again rely on a crazy &ldquo;Walker Function!&rdquo;). The first thing to do is to initialize the menu using TimberMenu(). This will make the menu available as an object to work with in the context. (TimberMenu can include a Wordpress menu slug or ID, or it can be sent with no parameter&ndash;and guess the right menu.)</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1"># functions.php
</span><span class="nx">add_filter</span><span class="p">(</span><span class="s1">'timber/context'</span><span class="p">,</span> <span class="s1">'add_to_context'</span><span class="p">);</span>
<span class="k">function</span> <span class="nf">add_to_context</span><span class="p">(</span><span class="nv">$data</span><span class="p">){</span>
    <span class="c1">// So here you are adding data to Timber's context object, i.e...
</span>    <span class="nv">$data</span><span class="p">[</span><span class="s1">'foo'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'I am some other typical value set in your functions.php file, unrelated to the menu'</span><span class="p">;</span>
    <span class="c1">// Now, in similar fashion, you add a Timber menu and send it along to the context.
</span>        <span class="nv">$data</span><span class="p">[</span><span class="s1">'menu'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberMenu</span><span class="p">();</span> <span class="c1">// This is where you can also send a WordPress menu slug or ID
</span>    <span class="k">return</span> <span class="nv">$data</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1"># index.php (or any PHP file)
// Since you want a menu object available on every page, I added it to the universal Timber context via the functions.php file. You could also this in each PHP file if you find that too confusing.
</span><span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'posts'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_posts</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;nav&gt;</span>
    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"main-nav"</span><span class="nt">&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">menu.get_items</span> <span class="cp">%}</span>
        <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-main-item </span><span class="cp">{{</span><span class="nv">item.classes</span> <span class="err">|</span> <span class="nv">join</span><span class="p">(</span><span class="s1">' '</span><span class="p">)</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;&lt;a</span> <span class="na">class=</span><span class="s">"nav-main-link"</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">item.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">item.title</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
            <span class="cp">{%</span> <span class="k">if</span> <span class="nv">item.get_children</span> <span class="cp">%}</span>
            <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"nav-drop"</span><span class="nt">&gt;</span>
              <span class="cp">{%</span> <span class="k">for</span> <span class="nv">child</span> <span class="ow">in</span> <span class="nv">item.get_children</span> <span class="cp">%}</span>
                <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"nav-drop-item"</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">child.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">child.title</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
              <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
             <span class="nt">&lt;/ul&gt;</span>
          <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
          <span class="nt">&lt;/li&gt;</span>
   <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
   <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>$id the ID# of the menu, corresponding to the wp_terms table</td>
</tr>
<tr>
<td>items</td>
<td>TimberMenuItem[]</td>
<td>null</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>$name of the menu (ex: <code class="prettyprint">Main Navigation</code>)</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>$name of the menu (ex: <code class="prettyprint">Main Navigation</code>)</td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( \Timber\integer/string $slug )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$slug</td>
<td>\Timber\integer/string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="find_parent_item_in_menu">find_parent_item_in_menu</h2>

<p><code class="prettyprint">find_parent_item_in_menu( array $menu_items, int $parent_id )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\TimberMenuItem/null</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$menu_items</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$parent_id</td>
<td>int</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_items">get_items</h2>

<p><code class="prettyprint">get_items( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p><em>This class extends \Timber\Core</em></p>

          <h1 id="timber-menuitem">Timber\MenuItem</h1>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#children">children</a></td>
<td>array/bool</td>
<td></td>
</tr>
<tr>
<td><a href="#is_external">is_external</a></td>
<td>bool</td>
<td></td>
</tr>
<tr>
<td><a href="#link">link</a></td>
<td>string</td>
<td>a full URL like http://mysite.com/thing/</td>
</tr>
<tr>
<td><a href="#name">name</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#slug">slug</a></td>
<td>string</td>
<td>the slug of the menu item kinda-like-this</td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( array/object $data )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$data</td>
<td>array/object</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__tostring">__toString</h2>

<p><code class="prettyprint">__toString( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the label for the menu item</p>

<h2 id="add_child">add_child</h2>

<p><code class="prettyprint">add_child( \Timber\TimberMenuItem $item )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$item</td>
<td>\Timber\TimberMenuItem</td>
<td></td>
</tr>
</tbody></table>

<h2 id="add_class">add_class</h2>

<p><code class="prettyprint">add_class( mixed $class_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>add a class the menu item should have</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$class_name</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="children">children</h2>

<p><code class="prettyprint">children( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/bool</code> </p>

<p>Get the child <a href="#TimberMenuItem">TimberMenuItems</a>s of a <a href="#TimberMenuItem">TimberMenuItem</a></p>

<h2 id="external">external</h2>

<p><code class="prettyprint">external( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<p>Checks to see if a link is external, helpful when creating rules for the target of a link</p>

<h2 id="is_external">is_external</h2>

<p><code class="prettyprint">is_external( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<p>Checks to see if the menu item is an external link so if my site is <code class="prettyprint">example.org</code>, <code class="prettyprint">google.com/whatever</code> is an external link. Helpful when creating rules for the target of a link</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">item.link</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">target=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">item.is_external</span> <span class="err">?</span> <span class="s1">'_blank'</span> <span class="err">:</span> <span class="s1">'_self'</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
</code></pre>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> a full URL like http://mysite.com/thing/</p>

<p>Get the full link to a Menu Item</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">menu.items</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">item.link</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h2 id="meta">meta</h2>

<p><code class="prettyprint">meta( string $key )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> whatever value is storied in the database</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$key</td>
<td>string</td>
<td>lookup key</td>
</tr>
</tbody></table>

<h2 id="name">name</h2>

<p><code class="prettyprint">name( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>The label for the menu item</p>

<h2 id="path">path</h2>

<p><code class="prettyprint">path( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the path of a URL like /foo</p>

<p>Return the relative path of a Menu Item&rsquo;s link</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">menu.items</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">item.path</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h2 id="slug">slug</h2>

<p><code class="prettyprint">slug( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the slug of the menu item kinda-like-this</p>

<p>The slug for the menu item</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;ul&gt;</span>
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">menu.items</span> <span class="cp">%}</span>
            <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">item.slug</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">item.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">item.name</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
             <span class="nt">&lt;/li&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>

## title
`title( )`

**returns:** `string` the public label like Foo

Gets the public label for the menu item

###### Twig
```twig
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="ow">in</span> <span class="nv">menu.items</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">item.link</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h2 id="type">type</h2>

<p><code class="prettyprint">type( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Return the type of the menu item</p>

<p><em>This class extends \Timber\Core</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-post">Timber\Post</h1>

<p>This is the object you use to access or extend WordPress posts. Think of it as Timber&rsquo;s (more accessible) version of WP_Post. This is used throughout Timber to represent posts retrieved from WordPress making them available to Twig templates. See the PHP and Twig examples for an example of what it&rsquo;s like to work with this object in your code.</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">// single.php, see connected twig example
</span><span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Timber\Post</span><span class="p">();</span> <span class="c1">// It's a new Timber\Post object, but an existing post from WordPress.
</span><span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="c">{# single.twig #}</span>
<span class="nt">&lt;article&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"headline"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"body"</span><span class="nt">&gt;</span>
        <span class="cp">{{</span><span class="nv">post.content</span><span class="cp">}}</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/article&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;article&gt;</span>
    <span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"headline"</span><span class="nt">&gt;</span>The Empire Strikes Back<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"body"</span><span class="nt">&gt;</span>
        It is a dark time for the Rebellion. Although the Death Star has been destroyed, Imperial troops have driven the Rebel forces from their hidden base and pursued them across the galaxy.
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/article&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#author">author</a></td>
<td>\Timber\User/null</td>
<td>A User object if found, false if not</td>
</tr>
<tr>
<td><a href="#categories">categories</a></td>
<td>array</td>
<td>of TimberTerms</td>
</tr>
<tr>
<td><a href="#category">category</a></td>
<td>\Timber\TimberTerm/null</td>
<td></td>
</tr>
<tr>
<td><a href="#children">children</a></td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>class</td>
<td>string</td>
<td>$class stores the CSS classes for the post (ex: &ldquo;post post-type-book post-123&rdquo;)</td>
</tr>
<tr>
<td><a href="#comments">comments</a></td>
<td>bool/array</td>
<td></td>
</tr>
<tr>
<td><a href="#content">content</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#date">date</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#format">format</a></td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td><a href="#get_preview">get_preview</a></td>
<td>string</td>
<td>of the post preview</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>$id the numeric WordPress id of a post</td>
</tr>
<tr>
<td><a href="#link">link</a></td>
<td>string</td>
<td>ex: http://example.org/2015/07/my-awesome-post</td>
</tr>
<tr>
<td><a href="#next">next</a></td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td><a href="#parent">parent</a></td>
<td>bool/\Timber\Timber\Post</td>
<td></td>
</tr>
<tr>
<td><a href="#path">path</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>post_status</td>
<td>string</td>
<td>$post_status    the status of a post (&ldquo;draft&rdquo;, &ldquo;publish&rdquo;, etc.)</td>
</tr>
<tr>
<td>post_type</td>
<td>string</td>
<td>$post_type      the name of the post type, this is the machine name (so &ldquo;my_custom_post_type&rdquo; as opposed to &ldquo;My Custom Post Type&rdquo;)</td>
</tr>
<tr>
<td><a href="#prev">prev</a></td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>slug</td>
<td>string</td>
<td>$slug       the URL-safe slug, this corresponds to the poorly-named &ldquo;post_name&rdquo; in the WP database, ex: &ldquo;hello-world&rdquo;</td>
</tr>
<tr>
<td><a href="#tags">tags</a></td>
<td>array</td>
<td></td>
</tr>
<tr>
<td><a href="#terms">terms</a></td>
<td>array</td>
<td></td>
</tr>
<tr>
<td><a href="#thumbnail">thumbnail</a></td>
<td>\Timber\TimberImage/null</td>
<td>of your thumbnail</td>
</tr>
<tr>
<td><a href="#time">time</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#title">title</a></td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( mixed $pid=null )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>If you send the constructor nothing it will try to figure out the current post id based on being inside The_Loop</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$pid</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="nv">$post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Timber\Post</span><span class="p">();</span>
    <span class="nv">$other_post</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Timber\Post</span><span class="p">(</span><span class="nv">$random_post_id</span><span class="p">);</span>
</code></pre>

<h2 id="__tostring">__toString</h2>

<p><code class="prettyprint">__toString( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Outputs the title of the post if you do something like <code class="prettyprint">&lt;h1&gt;{{post}}&lt;/h1&gt;</code></p>

<h2 id="author">author</h2>

<p><code class="prettyprint">author( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\User/null</code> A User object if found, false if not</p>

<p>Return the author of a post</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"byline"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.author.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.author.name</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
</code></pre>

<h2 id="categories">categories</h2>

<p><code class="prettyprint">categories( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> of TimberTerms</p>

<p>Get the categoires on a particular post</p>

<h2 id="category">category</h2>

<p><code class="prettyprint">category( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\TimberTerm/null</code> </p>

<p>Returns a category attached to a post</p>

<h2 id="children">children</h2>

<p><code class="prettyprint">children( string $post_type=&quot;any&quot;, bool/string/bool $childPostClass=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Returns an array of children on the post as Timber\Posts (or other claass as you define).</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$post_type</td>
<td>string</td>
<td><em>optional</em> use to find children of a particular post type (attachment vs. page for example). You might want to restrict to certain types of children in case other stuff gets all mucked in there. You can use &lsquo;parent&rsquo; to use the parent&rsquo;s post type</td>
</tr>
<tr>
<td>$childPostClass</td>
<td>bool/string/bool</td>
<td><em>optional</em> a custom post class (ex: &#39;MyTimber\Post&rsquo;) to return the objects as. By default (false) it will use Timber\Post::$post_class value.</td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">post.children</span> <span class="cp">%}</span>
        Here are the child pages:
        <span class="cp">{%</span> <span class="k">for</span> <span class="nv">child</span> <span class="ow">in</span> <span class="nv">page.children</span> <span class="cp">%}</span>
            <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">child.link</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">child.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
        <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</code></pre>

<h2 id="comment_form">comment_form</h2>

<p><code class="prettyprint">comment_form( array $args=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> of HTML for the form</p>

<p>Gets the comment form for use on a single article page</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$args</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="comments">comments</h2>

<p><code class="prettyprint">comments( int $count, string $order=&quot;wp&quot;, string $type=&quot;comment&quot;, string $status=&quot;approve&quot;, string $CommentClass=&quot;Timber\Comment&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/array</code> </p>

<p>Gets the comments on a Timber\Post and returns them as an array of <a href="#TimberComment">TimberComments</a> (or whatever comment class you set).</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$count</td>
<td>int</td>
<td>Set the number of comments you want to get. <code class="prettyprint">0</code> is analogous to &ldquo;all&rdquo;</td>
</tr>
<tr>
<td>$order</td>
<td>string</td>
<td>use ordering set in WordPress admin, or a different scheme</td>
</tr>
<tr>
<td>$type</td>
<td>string</td>
<td>For when other plugins use the comments table for their own special purposes, might be set to &#39;liveblog&rsquo; or other depending on what&rsquo;s stored in yr comments table</td>
</tr>
<tr>
<td>$status</td>
<td>string</td>
<td>Could be &#39;pending&rsquo;, etc.</td>
</tr>
<tr>
<td>$CommentClass</td>
<td>string</td>
<td>What class to use when returning Comment objects. As you become a Timber pro, you might find yourself extending TimberComment for your site or app (obviously, totally optional)</td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="c">{# single.twig #}</span>
    <span class="nt">&lt;h4&gt;</span>Comments:<span class="nt">&lt;/h4&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">comment</span> <span class="ow">in</span> <span class="nv">post.comments</span> <span class="cp">%}</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"comment-</span><span class="cp">{{</span><span class="nv">comment.ID</span><span class="cp">}}</span><span class="s"> comment-order-</span><span class="cp">{{</span><span class="nv">loop.index</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">comment.author.name</span><span class="cp">}}</span> said:<span class="nt">&lt;/p&gt;</span>
            <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">comment.content</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</code></pre>

<h2 id="content">content</h2>

<p><code class="prettyprint">content( int $page, mixed $len=-1 )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Gets the actual content of a WP Post, as opposed to post_content this will run the hooks/filters attached to the_content. \This guy will return your posts content with WordPress filters run on it (like for shortcodes and wpautop).</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$page</td>
<td>int</td>
<td></td>
</tr>
<tr>
<td>$len</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"article"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h2&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/h2&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"content"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
</code></pre>

<h2 id="convert">convert</h2>

<p><code class="prettyprint">convert( array $data, string $class )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Finds any WP_Post objects and converts them to Timber\Posts</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$data</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$class</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="date">date</h2>

<p><code class="prettyprint">date( string $date_format=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Get the date to use in your template!</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$date_format</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    Published on <span class="cp">{{</span> <span class="nv">post.date</span> <span class="cp">}}</span> // Uses WP's formatting set in Admin
    OR
    Published on <span class="cp">{{</span> <span class="nv">post.date</span> <span class="err">|</span> <span class="nv">date</span><span class="p">(</span><span class="s1">'F jS'</span><span class="p">)</span> <span class="cp">}}</span> // Jan 12th
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    Published on January 12, 2015
    OR
    Published on Jan 12th
</code></pre>

<h2 id="edit_link">edit_link</h2>

<p><code class="prettyprint">edit_link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/string</code> the edit URL of a post in the WordPress admin</p>

<p>Returns the edit URL of a post if the user has access to it</p>

<h2 id="format">format</h2>

<p><code class="prettyprint">format( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<h2 id="get_comment_count">get_comment_count</h2>

<p><code class="prettyprint">get_comment_count( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">int</code> the number of comments on a post</p>

<h2 id="get_content">get_content</h2>

<p><code class="prettyprint">get_content( mixed/int $len=-1, int $page )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Displays the content of the post with filters, shortcodes and wpautop applied</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$len</td>
<td>mixed/int</td>
<td></td>
</tr>
<tr>
<td>$page</td>
<td>int</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"article-text"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.get_content</span><span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"article-text"</span><span class="nt">&gt;&lt;p&gt;</span>Blah blah blah<span class="nt">&lt;/p&gt;&lt;p&gt;</span>More blah blah blah.<span class="nt">&lt;/p&gt;&lt;/div&gt;</span>
</code></pre>

<h2 id="get_field">get_field</h2>

<p><code class="prettyprint">get_field( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_image">get_image</h2>

<p><code class="prettyprint">get_image( string $field )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\TimberImage</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_method_values">get_method_values</h2>

<p><code class="prettyprint">get_method_values( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<h2 id="get_paged_content">get_paged_content</h2>

<p><code class="prettyprint">get_paged_content( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="get_post_type"><strike>get_post_type</strike></h2>

<p><strong>DEPRECATED</strong> since 1.0.4</p>

<p><code class="prettyprint">get_post_type( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\PostType</code> </p>

<p>Returns the post_type object with labels and other info</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    This post is from <span class="nt">&lt;span&gt;</span><span class="cp">{{</span> <span class="nv">post.get_post_type.labels.plural</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    This post is from <span class="nt">&lt;span&gt;</span>Recipes<span class="nt">&lt;/span&gt;</span>
</code></pre>

<h2 id="get_preview">get_preview</h2>

<p><code class="prettyprint">get_preview( mixed/int $len=50, bool $force=false, string $readmore=&quot;Read More&quot;, bool/bool/string $strip=true, string $end=&quot;&amp;hellip;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> of the post preview</p>

<p>get a preview of your post, if you have an excerpt it will use that, otherwise it will pull from the post_content. If there&rsquo;s a &lt;!&ndash; more &ndash;&gt; tag it will use that to mark where to pull through.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$len</td>
<td>mixed/int</td>
<td>The number of words that WP should use to make the tease. (Isn&rsquo;t this better than <a href="http://wordpress.org/support/topic/changing-the-default-length-of-the_excerpt-1?replies=14">this mess</a>?). If you&rsquo;ve set a post_excerpt on a post, we&rsquo;ll use that for the preview text; otherwise the first X words of the post_content</td>
</tr>
<tr>
<td>$force</td>
<td>bool</td>
<td>What happens if your custom post excerpt is longer then the length requested? By default (<code class="prettyprint">$force = false</code>) it will use the full <code class="prettyprint">post_excerpt</code>. However, you can set this to true to <em>force</em> your excerpt to be of the desired length</td>
</tr>
<tr>
<td>$readmore</td>
<td>string</td>
<td>The text you want to use on the &#39;readmore&rsquo; link</td>
</tr>
<tr>
<td>$strip</td>
<td>bool/bool/string</td>
<td>true for default, false for none, string for list of custom attributes</td>
</tr>
<tr>
<td>$end</td>
<td>string</td>
<td>The text to end the preview with (defaults to &hellip;)</td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">post.get_preview</span><span class="p">(</span><span class="nv">50</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h2 id="has_field">has_field</h2>

<p><code class="prettyprint">has_field( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">boolean</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="has_term">has_term</h2>

<p><code class="prettyprint">has_term( string/int $term_name_or_id, string $taxonomy=&quot;all&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$term_name_or_id</td>
<td>string/int</td>
<td></td>
</tr>
<tr>
<td>$taxonomy</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="import_field">import_field</h2>

<p><code class="prettyprint">import_field( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> ex: http://example.org/2015/07/my-awesome-post</p>

<p>get the permalink for a post object</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span>Read my post<span class="nt">&lt;/a&gt;</span>
</code></pre>

<h2 id="meta">meta</h2>

<p><code class="prettyprint">meta( mixed/string $field_name=null )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>mixed/string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="modified_author">modified_author</h2>

<p><code class="prettyprint">modified_author( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\User/null</code> A User object if found, false if not</p>

<p>Get the author (WordPress user) who last modified the post</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    Last updated by <span class="cp">{{</span> <span class="nv">post.modified_author.name</span> <span class="cp">}}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    Last updated by Harper Lee
</code></pre>

<h2 id="modified_date">modified_date</h2>

<p><code class="prettyprint">modified_date( string $date_format=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$date_format</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="modified_time">modified_time</h2>

<p><code class="prettyprint">modified_time( string $time_format=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$time_format</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="name">name</h2>

<p><code class="prettyprint">name( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="next">next</h2>

<p><code class="prettyprint">next( bool $in_same_term=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$in_same_term</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h2 id="paged_content">paged_content</h2>

<p><code class="prettyprint">paged_content( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="pagination">pagination</h2>

<p><code class="prettyprint">pagination( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Get a data array of pagination so you can navigate to the previous/next for a paginated post</p>

<h2 id="parent">parent</h2>

<p><code class="prettyprint">parent( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/\Timber\Timber\Post</code> </p>

<p>Gets the parent (if one exists) from a post as a Timber\Post object (or whatever is set in Timber\Post::$PostClass)</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    Parent page: <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">post.parent.link</span> <span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">post.parent.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
</code></pre>

<h2 id="path">path</h2>

<p><code class="prettyprint">path( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Gets the relative path of a WP Post, so while link() will return http://example.org/2015/07/my-cool-post this will return just /2015/07/my-cool-post</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.path</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;</span>
</code></pre>

<h2 id="permalink"><strike>permalink</strike></h2>

<p><strong>DEPRECATED</strong> 0.20.0 use link() instead</p>

<p><code class="prettyprint">permalink( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="prev">prev</h2>

<p><code class="prettyprint">prev( bool $in_same_term=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<p>Get the previous post in a set</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$in_same_term</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h4&gt;</span>Prior Entry:<span class="nt">&lt;/h4&gt;</span>
    <span class="nt">&lt;h3&gt;</span><span class="cp">{{</span><span class="nv">post.prev.title</span><span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span><span class="nv">post.prev.get_preview</span><span class="p">(</span><span class="nv">25</span><span class="p">)</span><span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
</code></pre>

<h2 id="preview">preview</h2>

<p><code class="prettyprint">preview( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\PostPreview</code> </p>

<h2 id="tags">tags</h2>

<p><code class="prettyprint">tags( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Gets the tags on a post, uses WP&rsquo;s post_tag taxonomy</p>

<h2 id="terms">terms</h2>

<p><code class="prettyprint">terms( string/string/array $tax=&quot;&quot;, bool $merge=true, string $TermClass=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p>Get the terms associated with the post This goes across all taxonomies by default</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$tax</td>
<td>string/string/array</td>
<td>What taxonom(y</td>
</tr>
<tr>
<td>$merge</td>
<td>bool</td>
<td>Should the resulting array be one big one (true)? Or should it be an array of sub-arrays for each taxonomy (false)?</td>
</tr>
<tr>
<td>$TermClass</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="thumbnail">thumbnail</h2>

<p><code class="prettyprint">thumbnail( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\TimberImage/null</code> of your thumbnail</p>

<p>get the featured image as a TimberImage</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.thumbnail.src</span><span class="cp">}}</span><span class="s">"</span> <span class="nt">/&gt;</span>
</code></pre>

<h2 id="time">time</h2>

<p><code class="prettyprint">time( string $time_format=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Get the time to use in your template</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$time_format</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    Published at <span class="cp">{{</span> <span class="nv">post.time</span> <span class="cp">}}</span> // Uses WP's formatting set in Admin
    OR
    Published at <span class="cp">{{</span> <span class="nv">post.time</span> <span class="err">|</span> <span class="nv">time</span><span class="p">(</span><span class="s1">'G:i'</span><span class="p">)</span> <span class="cp">}}</span> // 13:25
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    Published at 1:25 pm
    OR
    Published at 13:25
</code></pre>

<h2 id="title">title</h2>

<p><code class="prettyprint">title( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Returns the processed title to be used in templates. This returns the title of the post after WP&rsquo;s filters have run. This is analogous to <code class="prettyprint">the_title()</code> in standard WP template tags.</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
</code></pre>

<h2 id="type">type</h2>

<p><code class="prettyprint">type( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\PostType</code> </p>

<p>Returns the post_type object with labels and other info</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    This post is from <span class="nt">&lt;span&gt;</span><span class="cp">{{</span> <span class="nv">post.type.labels.name</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    This post is from <span class="nt">&lt;span&gt;</span>Recipes<span class="nt">&lt;/span&gt;</span>
</code></pre>

<h2 id="update">update</h2>

<p><code class="prettyprint">update( string $field, mixed $value )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>updates the post_meta of the current object with the given value</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$value</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_post_preview_id">get_post_preview_id</h2>

<p><code class="prettyprint">get_post_preview_id( mixed $query )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$query</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_wp_link_page">get_wp_link_page</h2>

<p><code class="prettyprint">get_wp_link_page( int $i )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$i</td>
<td>int</td>
<td></td>
</tr>
</tbody></table>

<p><em>This class extends \Timber\Core</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-site">Timber\Site</h1>

<p>TimberSite gives you access to information you need about your site. In Multisite setups, you can get info on other sites in your network.</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nv">$other_site_id</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'other_site'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberSite</span><span class="p">(</span><span class="nv">$other_site_id</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>My site is called <span class="cp">{{</span><span class="nv">site.name</span><span class="cp">}}</span>, another site on my network is <span class="cp">{{</span><span class="nv">other_site.name</span><span class="cp">}}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>My site is called Jared's blog, another site on my network is Upstatement.com
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>admin_email</td>
<td>string</td>
<td>the admin email address set in the WP admin panel</td>
</tr>
<tr>
<td>charset</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>the ID of a site in multisite</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>the language setting ex: en-US</td>
</tr>
<tr>
<td>language_attributes</td>
<td>string</td>
<td>of language attributes for usage in the <html> tag</td>
</tr>
<tr>
<td><a href="#link">link</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>multisite</td>
<td>bool</td>
<td>true if multisite, false if plain ole&rsquo; WordPress</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>pingback_url</td>
<td>string</td>
<td>for people who like trackback spam</td>
</tr>
<tr>
<td>rdf</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>theme</td>
<td><a href="#TimberTheme">TimberTheme</a></td>
<td></td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( mixed/string/int $site_name_or_id=null )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Constructs a TimberSite object</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$site_name_or_id</td>
<td>mixed/string/int</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="c1">//multisite setup
</span>    <span class="nv">$site</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberSite</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="nv">$site_two</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberSite</span><span class="p">(</span><span class="s2">"My Cool Site"</span><span class="p">);</span>
    <span class="c1">//non-multisite
</span>    <span class="nv">$site</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberSite</span><span class="p">();</span>
</code></pre>

<h2 id="__get">__get</h2>

<p><code class="prettyprint">__get( mixed $field )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Returns the link to the site&rsquo;s home.</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span> <span class="nv">site.link</span> <span class="cp">}}</span><span class="s">"</span> <span class="na">title=</span><span class="s">"Home"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"wp-content/uploads/logo.png"</span> <span class="na">alt=</span><span class="s">"Logo for some stupid thing"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/a&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"http://example.org"</span> <span class="na">title=</span><span class="s">"Home"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"wp-content/uploads/logo.png"</span> <span class="na">alt=</span><span class="s">"Logo for some stupid thing"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/a&gt;</span>
</code></pre>

<h2 id="url"><strike>url</strike></h2>

<p><strong>DEPRECATED</strong> 1.0.4</p>

<p><code class="prettyprint">url( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="switch_to_blog">switch_to_blog</h2>

<p><code class="prettyprint">switch_to_blog( string/\Timber\integer/null $site_name_or_id )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> with the ID of the old and new blogs</p>

<p>Switches to the blog requested in the request</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$site_name_or_id</td>
<td>string/\Timber\integer/null</td>
<td></td>
</tr>
</tbody></table>

<p><em>This class extends \Timber\Core</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-term">Timber\Term</h1>

<p>Terms: WordPress has got &lsquo;em, you want &#39;em. Categories. Tags. Custom Taxonomies. You don&rsquo;t care, you&rsquo;re a fiend. Well let&rsquo;s get this under control</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="c1">//Get a term by its ID
</span><span class="nv">$context</span><span class="p">[</span><span class="s1">'term'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberTerm</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<span class="c1">//Get a term when on a term archive page
</span><span class="nv">$context</span><span class="p">[</span><span class="s1">'term_page'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberTerm</span><span class="p">();</span>
<span class="c1">//Get a term with a slug
</span><span class="nv">$context</span><span class="p">[</span><span class="s1">'team'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberTerm</span><span class="p">(</span><span class="s1">'patriots'</span><span class="p">);</span>
<span class="c1">//Get a team with a slug from a specific taxonomy
</span><span class="nv">$context</span><span class="p">[</span><span class="s1">'st_louis'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberTerm</span><span class="p">(</span><span class="s1">'cardinals'</span><span class="p">,</span> <span class="s1">'baseball'</span><span class="p">);</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;h2&gt;</span><span class="cp">{{</span><span class="nv">term_page.name</span><span class="cp">}}</span> Archives<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h3&gt;</span>Teams<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">{{</span><span class="nv">st_louis.name</span><span class="cp">}}</span> - <span class="cp">{{</span><span class="nv">st_louis.description</span><span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">{{</span><span class="nv">team.name</span><span class="cp">}}</span> - <span class="cp">{{</span><span class="nv">team.description</span><span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;h2&gt;</span>Team Archives<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;h3&gt;</span>Teams<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;</span>St. Louis Cardinals - Winner of 11 World Series<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;</span>New England Patriots - Winner of 4 Super Bowls<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#children">children</a></td>
<td>array</td>
<td></td>
</tr>
<tr>
<td><a href="#description">description</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#edit_link">edit_link</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#link">link</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#meta">meta</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>the human-friendly name of the term (ex: French Cuisine)</td>
</tr>
<tr>
<td><a href="#path">path</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#posts">posts</a></td>
<td>array/bool/null</td>
<td></td>
</tr>
<tr>
<td>taxonomy</td>
<td>string</td>
<td>the WordPress taxonomy slug (ex: <code class="prettyprint">post_tag</code> or <code class="prettyprint">actors</code>)</td>
</tr>
<tr>
<td><a href="#title">title</a></td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( mixed/int $tid=null, string $tax=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$tid</td>
<td>mixed/int</td>
<td></td>
</tr>
<tr>
<td>$tax</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__tostring">__toString</h2>

<p><code class="prettyprint">__toString( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="children">children</h2>

<p><code class="prettyprint">children( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<h2 id="description">description</h2>

<p><code class="prettyprint">description( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="edit_link">edit_link</h2>

<p><code class="prettyprint">edit_link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="from">from</h2>

<p><code class="prettyprint">from( mixed $tid, mixed $taxonomy )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\static</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$tid</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$taxonomy</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="meta">meta</h2>

<p><code class="prettyprint">meta( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="path">path</h2>

<p><code class="prettyprint">path( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="posts">posts</h2>

<p><code class="prettyprint">posts( mixed/int $numberposts_or_args=10, string $post_type_or_class=&quot;any&quot;, string $post_class=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/bool/null</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$numberposts_or_args</td>
<td>mixed/int</td>
<td></td>
</tr>
<tr>
<td>$post_type_or_class</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$post_class</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h4&gt;</span>Recent posts in <span class="cp">{{</span><span class="nv">term.name</span><span class="cp">}}</span><span class="nt">&lt;/h4&gt;</span>
    <span class="nt">&lt;ul&gt;</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">post</span> <span class="ow">in</span> <span class="nv">term.posts</span><span class="p">(</span><span class="nv">3</span><span class="p">,</span> <span class="s1">'post'</span><span class="p">)</span> <span class="cp">%}</span>
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">post.link</span><span class="cp">}}</span><span class="s">"</span><span class="nt">&gt;</span><span class="cp">{{</span><span class="nv">post.title</span><span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
</code></pre>

<h2 id="title">title</h2>

<p><code class="prettyprint">title( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="update">update</h2>

<p><code class="prettyprint">update( mixed $key, mixed $value )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$key</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$value</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<p><em>This class extends \Timber\Core</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-theme">Timber\Theme</h1>

<p>Need to display info about your theme? Well you&rsquo;ve come to the right place. By default info on the current theme comes for free with what&rsquo;s fetched by <code class="prettyprint">Timber::get_context()</code> in which case you can access it your theme like so:</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="o">&lt;?</span><span class="nx">php</span>
<span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'index.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
<span class="cp">?&gt;</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"</span><span class="cp">{{</span><span class="nv">theme.link</span><span class="cp">}}</span><span class="s">/static/js/all.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://example.org/wp-content/themes/my-theme/static/js/all.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#link">link</a></td>
<td>string</td>
<td>the absolute path to the theme (ex: <code class="prettyprint">http://example.org/wp-content/themes/my-timber-theme</code>)</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>the human-friendly name of the theme (ex: <code class="prettyprint">My Timber Starter Theme</code>)</td>
</tr>
<tr>
<td>parent</td>
<td>TimberTheme</td>
<td>bool</td>
</tr>
<tr>
<td>parent_slug</td>
<td>string</td>
<td>the slug of the parent theme (ex: <code class="prettyprint">_s</code>)</td>
</tr>
<tr>
<td><a href="#path">path</a></td>
<td>string</td>
<td>the relative path to the theme (ex: <code class="prettyprint">/wp-content/themes/my-timber-theme</code>)</td>
</tr>
<tr>
<td>slug</td>
<td>string</td>
<td>the slug of the theme (ex: <code class="prettyprint">my-super-theme</code>)</td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( mixed/string $slug=null )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Constructs a new TimberTheme object. NOTE the TimberTheme object of the current theme comes in the default <code class="prettyprint">Timber::get_context()</code> call. You can access this in your twig template via `{{site.theme}}.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$slug</td>
<td>mixed/string</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="o">&lt;?</span><span class="nx">php</span>
        <span class="nv">$theme</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberTheme</span><span class="p">(</span><span class="s2">"my-theme"</span><span class="p">);</span>
        <span class="nv">$context</span><span class="p">[</span><span class="s1">'theme_stuff'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$theme</span><span class="p">;</span>
        <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.'</span><span class="p">)</span>
    <span class="cp">?&gt;</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    We are currently using the <span class="cp">{{</span> <span class="nv">theme_stuff.name</span> <span class="cp">}}</span> theme.
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    We are currently using the My Theme theme.
</code></pre>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the absolute path to the theme (ex: <code class="prettyprint">http://example.org/wp-content/themes/my-timber-theme</code>)</p>

<h2 id="path">path</h2>

<p><code class="prettyprint">path( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the relative path to the theme (ex: <code class="prettyprint">/wp-content/themes/my-timber-theme</code>)</p>

<h2 id="theme_mod">theme_mod</h2>

<p><code class="prettyprint">theme_mod( string $name, bool $default=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$default</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h2 id="theme_mods">theme_mods</h2>

<p><code class="prettyprint">theme_mods( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<p><em>This class extends \Timber\Core</em></p>

          <h1 id="timber-user">Timber\User</h1>

<p>This is used in Timber to represent users retrived from WordPress. You can call <code class="prettyprint">$my_user = new TimberUser(123);</code> directly, or access it through the <code class="prettyprint">{{ post.author }}</code> method.</p>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'current_user'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberUser</span><span class="p">();</span>
<span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
<span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"current-user-info"</span><span class="nt">&gt;</span>Your name is <span class="cp">{{</span> <span class="nv">current_user.name</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"article-info"</span><span class="nt">&gt;</span>This article is called "<span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span>" and it's by <span class="cp">{{</span> <span class="nv">post.author.name</span> <span class="cp">}}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code><span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"current-user-info"</span><span class="nt">&gt;</span>Your name is Jesse Eisenberg<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"article-info"</span><span class="nt">&gt;</span>This article is called "Consider the Lobster" and it's by David Foster Wallace
</code></pre>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>avatar</td>
<td>string</td>
<td>Image</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>The description from WordPress</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>The first name of the user</td>
</tr>
<tr>
<td>id</td>
<td>int</td>
<td>The ID from WordPress</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The last name of the user</td>
</tr>
<tr>
<td><a href="#link">link</a></td>
<td>string</td>
<td>http://example.org/author/lincoln</td>
</tr>
<tr>
<td><a href="#name">name</a></td>
<td>string</td>
<td>the human-friendly name of the user (ex: &ldquo;Buster Bluth&rdquo;)</td>
</tr>
<tr>
<td><a href="#path">path</a></td>
<td>string</td>
<td>ex: /author/lincoln</td>
</tr>
<tr>
<td><a href="#slug">slug</a></td>
<td>string</td>
<td>ex baberaham-lincoln</td>
</tr>
</tbody></table>

<h2 id="__construct">__construct</h2>

<p><code class="prettyprint">__construct( bool/int/bool $uid=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$uid</td>
<td>bool/int/bool</td>
<td></td>
</tr>
</tbody></table>

<h2 id="__tostring">__toString</h2>

<p><code class="prettyprint">__toString( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> a fallback for TimberUser::name()</p>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    This post is by <span class="cp">{{</span> <span class="nv">post.author</span> <span class="cp">}}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    This post is by Jared Novack
</code></pre>

<h2 id="get_custom">get_custom</h2>

<p><code class="prettyprint">get_custom( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/null</code> </p>

<h2 id="get_meta_field">get_meta_field</h2>

<p><code class="prettyprint">get_meta_field( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="link">link</h2>

<p><code class="prettyprint">link( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> http://example.org/author/lincoln</p>

<h2 id="meta">meta</h2>

<p><code class="prettyprint">meta( string $field_name )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$field_name</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="name">name</h2>

<p><code class="prettyprint">name( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> the human-friendly name of the user (ex: &ldquo;Buster Bluth&rdquo;)</p>

<h2 id="path">path</h2>

<p><code class="prettyprint">path( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> ex: /author/lincoln</p>

<h2 id="slug">slug</h2>

<p><code class="prettyprint">slug( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> ex baberaham-lincoln</p>

<p><em>This class extends \Timber\Core</em></p>

<p><em>This class implements \Timber\CoreInterface</em></p>

          <h1 id="timber-helper">Timber\Helper</h1>

<p>As the name suggests these are helpers for Timber (and you!) when developing. You can find additional (mainly internally-focused helpers) in TimberURLHelper</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#ob_function">ob_function</a></td>
<td>string</td>
<td></td>
</tr>
<tr>
<td><a href="#start_timer">start_timer</a></td>
<td>\Timber\float</td>
<td></td>
</tr>
<tr>
<td><a href="#transient">transient</a></td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="array_to_object">array_to_object</h2>

<p><code class="prettyprint">array_to_object( mixed $array )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\stdClass</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$array</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="array_truncate">array_truncate</h2>

<p><code class="prettyprint">array_truncate( mixed $array, mixed $len )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$array</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$len</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="close_tags">close_tags</h2>

<p><code class="prettyprint">close_tags( mixed $html )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$html</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="error_log">error_log</h2>

<p><code class="prettyprint">error_log( mixed $arg )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$arg</td>
<td>mixed</td>
<td>that you want to error_log</td>
</tr>
</tbody></table>

<h2 id="function_wrapper">function_wrapper</h2>

<p><code class="prettyprint">function_wrapper( mixed $function_name, array $defaults=array(), bool $return_output_buffer=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\Timber\FunctionWrapper/mixed</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$function_name</td>
<td>mixed</td>
<td>or array( $class( string</td>
</tr>
<tr>
<td>$defaults</td>
<td>array</td>
<td></td>
</tr>
<tr>
<td>$return_output_buffer</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_comment_form"><strike>get_comment_form</strike></h2>

<p><strong>DEPRECATED</strong> 0.21.8 use <code class="prettyprint">{{ function(&#39;comment_form&#39;) }}</code> instead</p>

<p><code class="prettyprint">get_comment_form( mixed $post_id=null, array $args=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Gets the comment form for use on a single article page</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$post_id</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$args</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_current_url">get_current_url</h2>

<p><code class="prettyprint">get_current_url( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<h2 id="get_object_by_property">get_object_by_property</h2>

<p><code class="prettyprint">get_object_by_property( mixed $array, mixed $key, mixed $value )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array/null</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$array</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$key</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$value</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_object_index_by_property">get_object_index_by_property</h2>

<p><code class="prettyprint">get_object_index_by_property( mixed $array, mixed $key, mixed $value )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool/int</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$array</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$key</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$value</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="get_wp_title">get_wp_title</h2>

<p><code class="prettyprint">get_wp_title( string $separator=&quot; &quot;, string $seplocation=&quot;left&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$separator</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>$seplocation</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="is_array_assoc">is_array_assoc</h2>

<p><code class="prettyprint">is_array_assoc( mixed $arr )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$arr</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="is_true">is_true</h2>

<p><code class="prettyprint">is_true( mixed $value )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$value</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="iseven">iseven</h2>

<p><code class="prettyprint">iseven( mixed $i )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$i</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="isodd">isodd</h2>

<p><code class="prettyprint">isodd( mixed $i )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">bool</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$i</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="ob_function">ob_function</h2>

<p><code class="prettyprint">ob_function( \Timber\callback $function, array $args=array() )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>Calls a function with an output buffer. This is useful if you have a function that outputs text that you want to capture and use within a twig template.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$function</td>
<td>\Timber\callback</td>
<td></td>
</tr>
<tr>
<td>$args</td>
<td>array</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="k">function</span> <span class="nf">the_form</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">echo</span> <span class="s1">'&lt;form action="form.php"&gt;&lt;input type="text" /&gt;&lt;input type="submit /&gt;&lt;/form&gt;'</span><span class="p">;</span>
    <span class="p">}</span>
        <span class="nv">$context</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">get_context</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'post'</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TimberPost</span><span class="p">();</span>
    <span class="nv">$context</span><span class="p">[</span><span class="s1">'my_form'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">ob_function</span><span class="p">(</span><span class="s1">'the_form'</span><span class="p">);</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single-form.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h6 id="twig">Twig</h6>
<pre class="highlight twig"><code>    <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
    <span class="cp">{{</span> <span class="nv">my_form</span> <span class="cp">}}</span>
</code></pre>

<h6 id="html">HTML</h6>
<pre class="highlight html"><code>    <span class="nt">&lt;h1&gt;</span>Apply to my contest!<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"form.php"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="nt">/&gt;&lt;input</span> <span class="na">type=</span><span class="s">"submit /&gt;&lt;/form&gt;
</span></code></pre>

<h2 id="osort">osort</h2>

<p><code class="prettyprint">osort( mixed $array, mixed $prop )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$array</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$prop</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h2 id="paginate_links">paginate_links</h2>

<p><code class="prettyprint">paginate_links( string $args=&quot;&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">array</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$args</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="start_timer">start_timer</h2>

<p><code class="prettyprint">start_timer( )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">\Timber\float</code> </p>

<p>For measuring time, this will start a timer</p>

<h2 id="stop_timer">stop_timer</h2>

<p><code class="prettyprint">stop_timer( mixed $start )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<p>For stopping time and getting the data</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$start</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="nv">$start</span> <span class="o">=</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">start_timer</span><span class="p">();</span>
    <span class="c1">// do some stuff that takes awhile
</span>    <span class="k">echo</span> <span class="nx">TimberHelper</span><span class="o">::</span><span class="na">stop_timer</span><span class="p">(</span> <span class="nv">$start</span> <span class="p">);</span>
</code></pre>

<h2 id="transient">transient</h2>

<p><code class="prettyprint">transient( mixed $slug, mixed $callback, mixed $transient_time, mixed $lock_timeout=5, bool $force=false )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">mixed</code> </p>

<p>A utility for a one-stop shop for Transients</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$slug</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$callback</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$transient_time</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$lock_timeout</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$force</td>
<td>bool</td>
<td></td>
</tr>
</tbody></table>

<h6 id="php">PHP</h6>
<pre class="highlight php"><code><span class="cp">&lt;?php</span>
    <span class="nv">$favorites</span> <span class="o">=</span> <span class="nx">Timber</span><span class="o">::</span><span class="na">transient</span><span class="p">(</span><span class="s1">'user-'</span><span class="o">.</span><span class="nv">$uid</span><span class="o">.</span><span class="s1">'-favorites'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$uid</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//some expensive query here that's doing something you want to store to a transient
</span>        <span class="k">return</span> <span class="nv">$favorites</span><span class="p">;</span>
    <span class="p">},</span> <span class="mi">600</span><span class="p">);</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">context</span><span class="p">[</span><span class="s1">'favorites'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$favorites</span><span class="p">;</span>
    <span class="nx">Timber</span><span class="o">::</span><span class="na">render</span><span class="p">(</span><span class="s1">'single.twig'</span><span class="p">,</span> <span class="nv">$context</span><span class="p">);</span>
</code></pre>

<h2 id="trim_words">trim_words</h2>

<p><code class="prettyprint">trim_words( mixed $text, mixed $num_words=55, mixed $more=null, string $allowed_tags=&quot;p a span b i br blockquote&quot; )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">string</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$text</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$num_words</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$more</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$allowed_tags</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="warn">warn</h2>

<p><code class="prettyprint">warn( string $message )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">boolean</code> </p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$message</td>
<td>string</td>
<td>that you want to output</td>
</tr>
</tbody></table>

<h2 id="handle_transient_locking">handle_transient_locking</h2>

<p><code class="prettyprint">handle_transient_locking( mixed $slug, mixed $callback, mixed $transient_time, mixed $lock_timeout, mixed $force, mixed $enable_transients )</code></p>

<p><strong>returns:</strong> <code class="prettyprint">void</code> </p>

<p>Does the dirty work of locking the transient, running the callback and unlocking</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>$slug</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$callback</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$transient_time</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$lock_timeout</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$force</td>
<td>mixed</td>
<td></td>
</tr>
<tr>
<td>$enable_transients</td>
<td>mixed</td>
<td></td>
</tr>
</tbody></table>

      </div>
      <!-- removed to bring code snippets inline -->
      <!-- <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div> -->
    </div>
  </body>
</html>
